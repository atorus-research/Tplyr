<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Create a count, desc, or shift layer for discrete count
based summaries, descriptive statistics summaries, or shift count summaries — group_count • Tplyr</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/yeti/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Create a count, desc, or shift layer for discrete count
based summaries, descriptive statistics summaries, or shift count summaries — group_count"><meta property="og:description" content='This family of functions specifies the type of summary that is
  to be performed within a layer. count layers are used to create
  summary counts of some discrete variable. desc layers create summary
  statistics, and shift layers summaries the counts of different
  changes in states. See the "details" section below for more information.'><meta property="og:image" content="/reference/figures/Atorus_Stickers_vF_Tplyr.png"><meta property="og:image:alt" content="Tplyr Hex Sticker"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:creator" content="@AtorusR"><meta name="twitter:site" content="@AtorusR"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-165685385-2"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-165685385-2');
</script></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">Tplyr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.4.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/Tplyr.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li class="divider">
    <li class="dropdown-header">Table Vignettes</li>
    <li>
      <a href="../articles/table.html">Tplyr Table Properties</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Layer Vignettes</li>
    <li>
      <a href="../articles/desc.html">Descriptive Statistic Layers</a>
    </li>
    <li>
      <a href="../articles/count.html">Count Layers</a>
    </li>
    <li>
      <a href="../articles/shift.html">Shift Layers</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Helpers</li>
    <li>
      <a href="../articles/riskdiff.html">Risk Difference</a>
    </li>
    <li>
      <a href="../articles/sort.html">Sorting a Tplyr Table</a>
    </li>
    <li>
      <a href="../articles/options.html">Tplyr Options</a>
    </li>
    <li>
      <a href="../articles/styled-table.html">Producing a Styled Table</a>
    </li>
    <li>
      <a href="../articles/denom.html">Totals, Missings, and Denominators</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/atorus-research/Tplyr/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Create a <code>count</code>, <code>desc</code>, or <code>shift</code> layer for discrete count
based summaries, descriptive statistics summaries, or shift count summaries</h1>
    <small class="dont-index">Source: <a href="https://github.com/atorus-research/Tplyr/blob/HEAD/R/layering.R" class="external-link"><code>R/layering.R</code></a></small>
    <div class="hidden name"><code>layer_constructors.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This family of functions specifies the type of summary that is
  to be performed within a layer. <code>count</code> layers are used to create
  summary counts of some discrete variable. <code>desc</code> layers create summary
  statistics, and <code>shift</code> layers summaries the counts of different
  changes in states. See the "details" section below for more information.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">group_count</span><span class="op">(</span><span class="va">parent</span>, <span class="va">target_var</span>, by <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="op">)</span>, where <span class="op">=</span> <span class="cn">TRUE</span>, <span class="va">...</span><span class="op">)</span>

<span class="fu">group_desc</span><span class="op">(</span><span class="va">parent</span>, <span class="va">target_var</span>, by <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="op">)</span>, where <span class="op">=</span> <span class="cn">TRUE</span>, <span class="va">...</span><span class="op">)</span>

<span class="fu">group_shift</span><span class="op">(</span><span class="va">parent</span>, <span class="va">target_var</span>, by <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="op">)</span>, where <span class="op">=</span> <span class="cn">TRUE</span>, <span class="va">...</span><span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>parent</dt>
<dd><p>Required. The parent environment of the layer. This must be the
<code>tplyr_table</code> object that the layer is contained within.</p></dd>
<dt>target_var</dt>
<dd><p>Symbol. Required, The variable name(s) on which the summary
is to be performed. Must be a variable within the target dataset. Enter
unquoted - i.e. target_var = AEBODSYS. You may also provide multiple
variables with <code><a href="https://dplyr.tidyverse.org/reference/vars.html" class="external-link">vars</a></code>.</p></dd>
<dt>by</dt>
<dd><p>A string, a variable name, or a list of variable names supplied
using <code><a href="https://dplyr.tidyverse.org/reference/vars.html" class="external-link">vars</a></code></p></dd>
<dt>where</dt>
<dd><p>Call. Filter logic used to subset the target data when
performing a summary.</p></dd>
<dt>...</dt>
<dd><p>Additional arguments to pass forward</p></dd>
</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>An <code>tplyr_layer</code> environment that is a child of the specified
  parent. The environment contains the object as listed below.
A <code>tplyr_layer</code> object</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    
<dl><dt>Count Layers</dt>
<dd><p>Count layers allow you to create
  summaries based on counting values with a variable. Additionally, this
  layer allows you to create n (%) summaries where you're also summarizing
  the proportion of instances a value occurs compared to some denominator.
  Count layers are also capable of producing counts of nested relationships.
  For example, if you want to produce counts of an overall outside group, and
  then the subgroup counts within that group, you can specify the target
  variable as vars(OutsideVariable, InsideVariable). This allows you to do
  tables like Adverse Events where you want to see the Preferred Terms within
  Body Systems, all in one layer. Further control over denominators is
  available using the function <code><a href="set_denoms_by.html">set_denoms_by</a></code> and distinct
  counts can be set using <code><a href="set_distinct_by.html">set_distinct_by</a></code></p></dd>
 <dt>Descriptive
  Statistics Layers</dt>
<dd><p>Descriptive statistics layers perform summaries on
  continuous variables. There are a number of summaries built into Tplyr
  already that you can perform, including n, mean, median, standard
  deviation, variance, min, max, inter-quartile range, Q1, Q3, and missing
  value counts. From these available summaries, the default presentation of a
  descriptive statistic layer will output 'n', 'Mean (SD)', 'Median', 'Q1, Q3',
  'Min, Max', and 'Missing'. You can change these summaries using
  <code><a href="set_format_strings.html">set_format_strings</a></code>, and you can also add your own summaries
  using <code><a href="set_custom_summaries.html">set_custom_summaries</a></code>. This allows you to implement any
  additional summary statistics you want presented.</p></dd>
 <dt>Shift Layers</dt>
<dd><p>A
  shift layer displays an endpoint's 'shift' throughout the duration of the
  study. It is an abstraction over the count layer, however we have provided
  an interface that is more efficient and intuitive. Targets are passed as
  named symbols using <code><a href="https://dplyr.tidyverse.org/reference/vars.html" class="external-link">dplyr::vars</a></code>. Generally the baseline is passed
  with the name 'row' and the shift is passed with the name 'column'. Both
  counts (n) and percentages (pct) are supported and can be specified with
  the <code><a href="set_format_strings.html">set_format_strings</a></code> function. To allow for flexibility
  when defining percentages, you can define the denominator using the
  <code><a href="set_denoms_by.html">set_denoms_by</a></code> function. This function takes variable names and
  uses those to determine the denominator for the counts.</p></dd>
 
</dl></div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p>[<a href="layer_attachment.html">add_layer</a>, <a href="layer_attachment.html">add_layers</a>, <a href="tplyr_table.html">tplyr_table</a>, <a href="tplyr_layer.html">tplyr_layer</a>]</p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="co"># Load in pipe</span></span>
<span class="r-in"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://magrittr.tidyverse.org" class="external-link">magrittr</a></span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">t</span> <span class="op">&lt;-</span> <span class="fu"><a href="tplyr_table.html">tplyr_table</a></span><span class="op">(</span><span class="va">iris</span>, <span class="va">Species</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu"><a href="layer_attachment.html">add_layer</a></span><span class="op">(</span></span>
<span class="r-in">    <span class="fu">group_desc</span><span class="op">(</span>target_var<span class="op">=</span><span class="va">Sepal.Width</span><span class="op">)</span></span>
<span class="r-in">  <span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">t</span> <span class="op">&lt;-</span> <span class="fu"><a href="tplyr_table.html">tplyr_table</a></span><span class="op">(</span><span class="va">iris</span>, <span class="va">Species</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu"><a href="layer_attachment.html">add_layer</a></span><span class="op">(</span></span>
<span class="r-in">    <span class="fu">group_desc</span><span class="op">(</span>target_var<span class="op">=</span><span class="va">Sepal.Width</span><span class="op">)</span></span>
<span class="r-in">  <span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">t</span> <span class="op">&lt;-</span> <span class="fu"><a href="tplyr_table.html">tplyr_table</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="va">am</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu"><a href="layer_attachment.html">add_layer</a></span><span class="op">(</span></span>
<span class="r-in">    <span class="fu">group_shift</span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span>row<span class="op">=</span><span class="va">gear</span>, column<span class="op">=</span><span class="va">carb</span><span class="op">)</span>, by<span class="op">=</span><span class="va">cyl</span><span class="op">)</span></span>
<span class="r-in">  <span class="op">)</span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Eli Miller, Mike Stackhouse, Ashley Tarasiewicz, Nathan Kosiba.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.1.</p>
</div>

      </footer></div>

  


  

  </body></html>

