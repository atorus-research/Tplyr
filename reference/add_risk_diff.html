<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Add risk difference to a count layer — add_risk_diff • Tplyr</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/yeti/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Add risk difference to a count layer — add_risk_diff"><meta property="og:description" content="A very common requirement for summary tables is to calculate the risk difference between treatment
groups. add_risk_diff allows you to do this. The underlying risk difference calculations
are performed using the Base R function prop.test - so prior to using this function,
be sure to familiarize yourself with its functionality."><meta property="og:image" content="/reference/figures/Atorus_Stickers_vF_Tplyr.png"><meta property="og:image:alt" content="Tplyr Hex Sticker"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:creator" content="@AtorusR"><meta name="twitter:site" content="@AtorusR"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-165685385-2"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-165685385-2');
</script></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">Tplyr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.4.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/Tplyr.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li class="divider">
    <li class="dropdown-header">Table Vignettes</li>
    <li>
      <a href="../articles/table.html">Tplyr Table Properties</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Layer Vignettes</li>
    <li>
      <a href="../articles/desc.html">Descriptive Statistic Layers</a>
    </li>
    <li>
      <a href="../articles/count.html">Count Layers</a>
    </li>
    <li>
      <a href="../articles/shift.html">Shift Layers</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Helpers</li>
    <li>
      <a href="../articles/riskdiff.html">Risk Difference</a>
    </li>
    <li>
      <a href="../articles/sort.html">Sorting a Tplyr Table</a>
    </li>
    <li>
      <a href="../articles/options.html">Tplyr Options</a>
    </li>
    <li>
      <a href="../articles/styled-table.html">Producing a Styled Table</a>
    </li>
    <li>
      <a href="../articles/denom.html">Totals, Missings, and Denominators</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/atorus-research/Tplyr/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Add risk difference to a count layer</h1>
    <small class="dont-index">Source: <a href="https://github.com/atorus-research/Tplyr/blob/HEAD/R/riskdiff.R" class="external-link"><code>R/riskdiff.R</code></a></small>
    <div class="hidden name"><code>add_risk_diff.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>A very common requirement for summary tables is to calculate the risk difference between treatment
groups. <code>add_risk_diff</code> allows you to do this. The underlying risk difference calculations
are performed using the Base R function <code><a href="https://rdrr.io/r/stats/prop.test.html" class="external-link">prop.test</a></code> - so prior to using this function,
be sure to familiarize yourself with its functionality.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">add_risk_diff</span><span class="op">(</span><span class="va">layer</span>, <span class="va">...</span>, args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>, distinct <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>layer</dt>
<dd><p>Layer upon which the risk difference will be attached</p></dd>
<dt>...</dt>
<dd><p>Comparison groups, provided as character vectors where the first group is the comparison,
and the second is the reference</p></dd>
<dt>args</dt>
<dd><p>Arguments passed directly into <code><a href="https://rdrr.io/r/stats/prop.test.html" class="external-link">prop.test</a></code></p></dd>
<dt>distinct</dt>
<dd><p>Logical - Use distinct counts (if available).</p></dd>
</dl></div>
    <div id="details">
    <h2>Details</h2>
    <p><code>add_risk_diff</code> can only be attached to a count layer, so the count layer must be constructed
first. <code>add_risk_diff</code> allows you to compare the difference between treatment group, so all
comparisons should be based upon the values within the specified <code>treat_var</code> in your
<code>tplyr_table</code> object.</p>
<p>Comparisons are specified by providing two-element character vectors. You can provide as many of
these groups as you want. You can also use groups that have been constructed using
<code><a href="treat_grps.html">add_treat_grps</a></code> or <code><a href="treat_grps.html">add_total_group</a></code>. The first element provided will be considered
the 'reference' group (i.e. the left side of the comparison), and the second group will be considered
the 'comparison'. So if you'd like to see the risk difference of 'T1 - Placebo', you would specify
this as <code>c('T1', 'Placebo')</code>.</p>
<p>Tplyr forms your two-way table in the background, and then runs <code><a href="https://rdrr.io/r/stats/prop.test.html" class="external-link">prop.test</a></code> appropriately.
Similar to way that the display of layers are specified, the exact values and format of how you'd like
the risk difference display are set using <code><a href="set_format_strings.html">set_format_strings</a></code>. This controls both the values
and the format of how the risk difference is displayed. Risk difference formats are set within
<code><a href="set_format_strings.html">set_format_strings</a></code> by using the name 'riskdiff'.</p>
<p>You have 5 variables to choose from in your data presentation:</p><dl><dt><strong>comp</strong></dt>
<dd><p>Probability of the left hand side group (i.e. comparison)</p></dd>

  <dt><strong>ref</strong></dt>
<dd><p>Probability of the right hand side group (i.e. reference)</p></dd>

  <dt><strong>dif</strong></dt>
<dd><p>Difference of comparison - reference</p></dd>

  <dt><strong>low</strong></dt>
<dd><p>Lower end of the confidence interval (default is 95%, override with the <code>args</code> paramter)</p></dd>

  <dt><strong>high</strong></dt>
<dd><p>Upper end of the confidence interval (default is 95%, override with the <code>args</code> paramter)</p></dd>


</dl><p>Use these variable names when forming your <code><a href="f_str.html">f_str</a></code> objects. The default presentation, if no
string format is specified, will be:</p>
<p><code>f_str('xx.xxx (xx.xxx, xx.xxx)', dif, low, high)</code></p>
<p>Note - within Tplyr, you can account for negatives by allowing an extra space within your integer
side settings. This will help with your alignment.</p>
<p>If columns are specified on a Tplyr table, risk difference comparisons still only take place between
groups within the <code>treat_var</code> variable - but they are instead calculated treating the <code>cols</code>
variables as by variables. Just like the tplyr layers themselves, the risk difference will then be transposed
and display each risk difference as separate variables by each of the <code>cols</code> variables.</p>
<p>If <code>distinct</code> is TRUE (the default), all calculations will take place on the distinct counts, if
they are available. Otherwise, non-distinct counts will be used.</p>
<p>One final note - <code><a href="https://rdrr.io/r/stats/prop.test.html" class="external-link">prop.test</a></code> may throw quite a few warnings. This is natural, because it
alerts you when there's not enough data for the approximations to be correct. This may be unnerving
coming from a SAS programming world, but this is R is trying to alert you that the values provided
don't have enough data to truly be statistically accurate.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://magrittr.tidyverse.org" class="external-link">magrittr</a></span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co">## Two group comparisons with default options applied</span></span>
<span class="r-in"><span class="va">t</span> <span class="op">&lt;-</span> <span class="fu"><a href="tplyr_table.html">tplyr_table</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="va">gear</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Basic risk diff for two groups, using defaults</span></span>
<span class="r-in"><span class="va">l1</span> <span class="op">&lt;-</span> <span class="fu"><a href="layer_constructors.html">group_count</a></span><span class="op">(</span><span class="va">t</span>, <span class="va">carb</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span class="r-in">  <span class="co"># Compare 3 vs. 4, 3 vs. 5</span></span>
<span class="r-in">  <span class="fu">add_risk_diff</span><span class="op">(</span></span>
<span class="r-in">    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'3'</span>, <span class="st">'4'</span><span class="op">)</span>,</span>
<span class="r-in">    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'3'</span>, <span class="st">'5'</span><span class="op">)</span></span>
<span class="r-in">  <span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Build and show output</span></span>
<span class="r-in"><span class="fu"><a href="layer_attachment.html">add_layers</a></span><span class="op">(</span><span class="va">t</span>, <span class="va">l1</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="build.html">build</a></span><span class="op">(</span><span class="op">)</span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Chi-squared approximation may be incorrect</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Chi-squared approximation may be incorrect</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Chi-squared approximation may be incorrect</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Chi-squared approximation may be incorrect</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Chi-squared approximation may be incorrect</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Chi-squared approximation may be incorrect</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Chi-squared approximation may be incorrect</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Chi-squared approximation may be incorrect</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Chi-squared approximation may be incorrect</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Chi-squared approximation may be incorrect</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Chi-squared approximation may be incorrect</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Chi-squared approximation may be incorrect</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 6 × 8</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   row_label1 var1_3     var1_4     var1_5  ord_layer_index rdiff_3_4  rdiff_3_5 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> 1          3 ( 20.0%) 4 ( 33.3%) 0 (  0…               1 <span style="color: #949494;">"</span>-0.133 (… <span style="color: #949494;">"</span> 0.200 (…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> 2          4 ( 26.7%) 4 ( 33.3%) 2 ( 40…               1 <span style="color: #949494;">"</span>-0.067 (… <span style="color: #949494;">"</span>-0.133 (…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> 3          3 ( 20.0%) 0 (  0.0%) 0 (  0…               1 <span style="color: #949494;">"</span> 0.200 (… <span style="color: #949494;">"</span> 0.200 (…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span> 4          5 ( 33.3%) 4 ( 33.3%) 1 ( 20…               1 <span style="color: #949494;">"</span> 0.000 (… <span style="color: #949494;">"</span> 0.133 (…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span> 6          0 (  0.0%) 0 (  0.0%) 1 ( 20…               1 <span style="color: #949494;">"</span> 0.000 (… <span style="color: #949494;">"</span>-0.200 (…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">6</span> 8          0 (  0.0%) 0 (  0.0%) 1 ( 20…               1 <span style="color: #949494;">"</span> 0.000 (… <span style="color: #949494;">"</span>-0.200 (…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># … with 1 more variable: ord_layer_1 &lt;dbl&gt;</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co">## Specify custom formats and display variables</span></span>
<span class="r-in"><span class="va">t</span> <span class="op">&lt;-</span> <span class="fu"><a href="tplyr_table.html">tplyr_table</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="va">gear</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Create the layer with custom formatting</span></span>
<span class="r-in"><span class="va">l2</span> <span class="op">&lt;-</span> <span class="fu"><a href="layer_constructors.html">group_count</a></span><span class="op">(</span><span class="va">t</span>, <span class="va">carb</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span class="r-in">  <span class="co"># Compare 3 vs. 4, 3 vs. 5</span></span>
<span class="r-in">  <span class="fu">add_risk_diff</span><span class="op">(</span></span>
<span class="r-in">    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'3'</span>, <span class="st">'4'</span><span class="op">)</span>,</span>
<span class="r-in">    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'3'</span>, <span class="st">'5'</span><span class="op">)</span></span>
<span class="r-in">  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu"><a href="set_format_strings.html">set_format_strings</a></span><span class="op">(</span></span>
<span class="r-in">    <span class="st">'n_counts'</span> <span class="op">=</span> <span class="fu"><a href="f_str.html">f_str</a></span><span class="op">(</span><span class="st">'xx (xx.x)'</span>, <span class="va">n</span>, <span class="va">pct</span><span class="op">)</span>,</span>
<span class="r-in">    <span class="st">'riskdiff'</span> <span class="op">=</span> <span class="fu"><a href="f_str.html">f_str</a></span><span class="op">(</span><span class="st">'xx.xxx, xx.xxx, xx.xxx, xx.xxx, xx.xxx'</span>, <span class="va">comp</span>, <span class="va">ref</span>, <span class="va">dif</span>, <span class="va">low</span>, <span class="va">high</span><span class="op">)</span></span>
<span class="r-in">  <span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Build and show output</span></span>
<span class="r-in"><span class="fu"><a href="layer_attachment.html">add_layers</a></span><span class="op">(</span><span class="va">t</span>, <span class="va">l2</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="build.html">build</a></span><span class="op">(</span><span class="op">)</span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Chi-squared approximation may be incorrect</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Chi-squared approximation may be incorrect</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Chi-squared approximation may be incorrect</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Chi-squared approximation may be incorrect</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Chi-squared approximation may be incorrect</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Chi-squared approximation may be incorrect</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Chi-squared approximation may be incorrect</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Chi-squared approximation may be incorrect</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Chi-squared approximation may be incorrect</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Chi-squared approximation may be incorrect</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Chi-squared approximation may be incorrect</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Chi-squared approximation may be incorrect</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 6 × 8</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   row_label1 var1_3      var1_4      var1_5  ord_layer_index rdiff_3_4 rdiff_3_5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> 1          <span style="color: #949494;">"</span> 3 (20.0)<span style="color: #949494;">"</span> <span style="color: #949494;">"</span> 4 (33.3)<span style="color: #949494;">"</span> <span style="color: #949494;">"</span> 0 ( …               1 <span style="color: #949494;">"</span> 0.200,… <span style="color: #949494;">"</span> 0.200,…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> 2          <span style="color: #949494;">"</span> 4 (26.7)<span style="color: #949494;">"</span> <span style="color: #949494;">"</span> 4 (33.3)<span style="color: #949494;">"</span> <span style="color: #949494;">"</span> 2 (4…               1 <span style="color: #949494;">"</span> 0.267,… <span style="color: #949494;">"</span> 0.267,…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> 3          <span style="color: #949494;">"</span> 3 (20.0)<span style="color: #949494;">"</span> <span style="color: #949494;">"</span> 0 ( 0.0)<span style="color: #949494;">"</span> <span style="color: #949494;">"</span> 0 ( …               1 <span style="color: #949494;">"</span> 0.200,… <span style="color: #949494;">"</span> 0.200,…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span> 4          <span style="color: #949494;">"</span> 5 (33.3)<span style="color: #949494;">"</span> <span style="color: #949494;">"</span> 4 (33.3)<span style="color: #949494;">"</span> <span style="color: #949494;">"</span> 1 (2…               1 <span style="color: #949494;">"</span> 0.333,… <span style="color: #949494;">"</span> 0.333,…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span> 6          <span style="color: #949494;">"</span> 0 ( 0.0)<span style="color: #949494;">"</span> <span style="color: #949494;">"</span> 0 ( 0.0)<span style="color: #949494;">"</span> <span style="color: #949494;">"</span> 1 (2…               1 <span style="color: #949494;">"</span> 0.000,… <span style="color: #949494;">"</span> 0.000,…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">6</span> 8          <span style="color: #949494;">"</span> 0 ( 0.0)<span style="color: #949494;">"</span> <span style="color: #949494;">"</span> 0 ( 0.0)<span style="color: #949494;">"</span> <span style="color: #949494;">"</span> 1 (2…               1 <span style="color: #949494;">"</span> 0.000,… <span style="color: #949494;">"</span> 0.000,…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># … with 1 more variable: ord_layer_1 &lt;dbl&gt;</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co">## Passing arguments to prop.test</span></span>
<span class="r-in"><span class="va">t</span> <span class="op">&lt;-</span> <span class="fu"><a href="tplyr_table.html">tplyr_table</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="va">gear</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Create the layer with args option</span></span>
<span class="r-in"><span class="va">l3</span> <span class="op">&lt;-</span> <span class="fu"><a href="layer_constructors.html">group_count</a></span><span class="op">(</span><span class="va">t</span>, <span class="va">carb</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span class="r-in">  <span class="co"># Compare 3 vs. 4, 4 vs. 5</span></span>
<span class="r-in">  <span class="fu">add_risk_diff</span><span class="op">(</span></span>
<span class="r-in">    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'3'</span>, <span class="st">'4'</span><span class="op">)</span>,</span>
<span class="r-in">    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'3'</span>, <span class="st">'5'</span><span class="op">)</span>,</span>
<span class="r-in">    args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>conf.level <span class="op">=</span> <span class="fl">0.9</span>, correct<span class="op">=</span><span class="cn">FALSE</span>, alternative<span class="op">=</span><span class="st">'less'</span><span class="op">)</span></span>
<span class="r-in">  <span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Build and show output</span></span>
<span class="r-in"><span class="fu"><a href="layer_attachment.html">add_layers</a></span><span class="op">(</span><span class="va">t</span>, <span class="va">l3</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="build.html">build</a></span><span class="op">(</span><span class="op">)</span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Chi-squared approximation may be incorrect</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Chi-squared approximation may be incorrect</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Chi-squared approximation may be incorrect</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Chi-squared approximation may be incorrect</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Chi-squared approximation may be incorrect</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Chi-squared approximation may be incorrect</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Chi-squared approximation may be incorrect</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Chi-squared approximation may be incorrect</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Chi-squared approximation may be incorrect</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Chi-squared approximation may be incorrect</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Chi-squared approximation may be incorrect</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Chi-squared approximation may be incorrect</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 6 × 8</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   row_label1 var1_3     var1_4     var1_5  ord_layer_index rdiff_3_4  rdiff_3_5 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> 1          3 ( 20.0%) 4 ( 33.3%) 0 (  0…               1 <span style="color: #949494;">"</span>-0.133 (… <span style="color: #949494;">"</span> 0.200 (…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> 2          4 ( 26.7%) 4 ( 33.3%) 2 ( 40…               1 <span style="color: #949494;">"</span>-0.067 (… <span style="color: #949494;">"</span>-0.133 (…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> 3          3 ( 20.0%) 0 (  0.0%) 0 (  0…               1 <span style="color: #949494;">"</span> 0.200 (… <span style="color: #949494;">"</span> 0.200 (…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span> 4          5 ( 33.3%) 4 ( 33.3%) 1 ( 20…               1 <span style="color: #949494;">"</span> 0.000 (… <span style="color: #949494;">"</span> 0.133 (…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span> 6          0 (  0.0%) 0 (  0.0%) 1 ( 20…               1 <span style="color: #949494;">"</span> 0.000 (… <span style="color: #949494;">"</span>-0.200 (…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">6</span> 8          0 (  0.0%) 0 (  0.0%) 1 ( 20…               1 <span style="color: #949494;">"</span> 0.000 (… <span style="color: #949494;">"</span>-0.200 (…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># … with 1 more variable: ord_layer_1 &lt;dbl&gt;</span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Eli Miller, Mike Stackhouse, Ashley Tarasiewicz, Nathan Kosiba.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.1.</p>
</div>

      </footer></div>

  


  

  </body></html>

