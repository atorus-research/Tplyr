<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="f_str objects are intended to be used within the function
set_format_strings. The f_str object carries information that powers a
significant amount of layer processing. The format_string parameter is
capable of controlling the display of a data point and decimal precision. The
variables provided in ... control which data points are used to populate
the string formatted output."><title>Create a f_str object — f_str • Tplyr</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Create a f_str object — f_str"><meta property="og:description" content="f_str objects are intended to be used within the function
set_format_strings. The f_str object carries information that powers a
significant amount of layer processing. The format_string parameter is
capable of controlling the display of a data point and decimal precision. The
variables provided in ... control which data points are used to populate
the string formatted output."><meta property="og:image" content="https://atorus-research.github.io/Tplyr/reference/figures/Atorus_Stickers_vF_Tplyr.png"><meta property="og:image:alt" content="Tplyr Hex Sticker"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:creator" content="@AtorusR"><meta name="twitter:site" content="@AtorusR"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-165685385-2"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-165685385-2');
</script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">Tplyr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/Tplyr.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <h6 class="dropdown-header" data-toc-skip>Table Vignettes</h6>
    <a class="dropdown-item" href="../articles/table.html">Tplyr Table Properties</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Layer Vignettes</h6>
    <a class="dropdown-item" href="../articles/desc.html">Descriptive Statistic Layers</a>
    <a class="dropdown-item" href="../articles/count.html">Count Layers</a>
    <a class="dropdown-item" href="../articles/shift.html">Shift Layers</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Helpers</h6>
    <a class="dropdown-item" href="../articles/riskdiff.html">Risk Difference</a>
    <a class="dropdown-item" href="../articles/sort.html">Sorting a Tplyr Table</a>
    <a class="dropdown-item" href="../articles/options.html">Tplyr Options</a>
    <a class="dropdown-item" href="../articles/layer_templates.html">Layer Templates</a>
    <a class="dropdown-item" href="../articles/styled-table.html">Producing a Styled Table</a>
    <a class="dropdown-item" href="../articles/denom.html">Totals, Missings, and Denominators</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Metadata</h6>
    <a class="dropdown-item" href="../articles/metadata.html">Tplyr Metadata</a>
    <a class="dropdown-item" href="../articles/custom-metadata.html">Creating Custom Tplyr Metadata</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/atorus-research/Tplyr/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Create a <code>f_str</code> object</h1>
      <small class="dont-index">Source: <a href="https://github.com/atorus-research/Tplyr/blob/main/R/format.R" class="external-link"><code>R/format.R</code></a></small>
      <div class="d-none name"><code>f_str.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>f_str</code> objects are intended to be used within the function
<code>set_format_strings</code>. The <code>f_str</code> object carries information that powers a
significant amount of layer processing. The <code>format_string</code> parameter is
capable of controlling the display of a data point and decimal precision. The
variables provided in <code>...</code> control which data points are used to populate
the string formatted output.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">f_str</span><span class="op">(</span><span class="va">format_string</span>, <span class="va">...</span>, empty <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>.overall <span class="op">=</span> <span class="st">""</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>format_string</dt>
<dd><p>The desired display format. X's indicate digits. On the
left, the number of x's indicates the integer length. On the right, the
number of x's controls decimal precision and rounding. Variables are
inferred by any separation of the 'x' values other than a decimal.</p></dd>


<dt>...</dt>
<dd><p>The variables to be formatted using the format specified in
<code>format_string</code>.</p></dd>


<dt>empty</dt>
<dd><p>The string to display when the numeric data is not available.
For desc layers, an unnamed character vector will populate within the
provided format string, set to the same width as the fitted numbers. Use a
single element character vector, with the element named '.overall' to
instead replace the whole string.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A <code>f_str</code> object</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Format strings are one of the most powerful components of 'Tplyr'.
Traditionally, converting numeric values into strings for presentation can
consume a good deal of time. Values and decimals need to align between
rows, rounding before trimming is sometimes forgotten - it can become a
tedious mess that is realistically not an important part of the analysis
being performed. 'Tplyr' makes this process as simple as we can, while
still allowing flexibility to the user.</p>
<p>Tplyr provides both manual and automatic decimal precision formatting. The
display of the numbers in the resulting data frame is controlled by the
<code>format_string</code> parameter. For manual precision, just like dummy values may
be presented on your mocks, integer and decimal precision is specified by
the user providing a string of 'x's for how you'd like your numbers
formatted. If you'd like 2 integers with 3 decimal places, you specify your
string as 'xx.xxx'. 'Tplyr' does the work to get the numbers in the right
place.</p>
<p>To take this a step further, automatic decimal precision can also be
obtained based on the collected precision within the data. When creating
tables where results vary by some parameter, different results may call for
different degrees of precision. To use automatic precision, use a single
'a' on either the integer and decimal side. If you'd like to use increased
precision (i.e. you'd like mean to be collected precision +1), use 'a+1'.
So if you'd like both integer and and decimal precision to be based on the
data as collected, you can use a format like 'a.a' - or for collected+1
decimal precision, 'a.a+1'.  You can mix and match this with manual formats
as well, making format strings such as 'xx.a+1'.</p>
<p>If you want two numbers on the same line, you provide two sets of x's. For
example, if you're presenting a value like "mean (sd)" - you could provide
the string 'xx.xx (xx.xxx)', or perhaps 'a.a+1 (a.a+2). Note that you're
able to provide  different integer lengths and different decimal precision
for the two values. Each format string is independent and relates only to
the format specified.</p>
<p>The other parameters of the <code>f_str</code> call specify what values should fill
the x's. <code>f_str</code> objects are used slightly differently between different
layers. When declaring a format string within a count layer, <code>f_str()</code>
expects to see the values <code>n</code> or <code>distinct_n</code> for event or distinct counts,
<code>pct</code> or <code>distinct_pct</code> for event or distinct percentages, or <code>total</code> or
<code>distinct_total</code> for denominator calculations. But in descriptive statistic
layers, <code>f_str</code> parameters refer to the names of the summaries being
performed, either by built in defaults, or custom summaries declared using
<code><a href="set_custom_summaries.html">set_custom_summaries()</a></code>. See <code><a href="set_format_strings.html">set_format_strings()</a></code> for some more notes
about layers specific implementation.</p>
<p>An <code>f_str()</code> may also be used outside of a Tplyr table. The function
<code><a href="apply_formats.html">apply_formats()</a></code> allows you to apply an <code>f_str</code> within the context of
<code><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">dplyr::mutate()</a></code> or more generally a vectorized function.</p>
    </div>
    <div class="section level2">
    <h2 id="valid-f-str-variables-by-layer-type">Valid <code>f_str()</code> Variables by Layer Type<a class="anchor" aria-label="anchor" href="#valid-f-str-variables-by-layer-type"></a></h2>
    


<p>Valid variables allowed within the <code>...</code> parameter of <code>f_str()</code> differ by
layer type.</p><ul><li><p>Count layers</p><ul><li><p><code>n</code></p></li>
<li><p><code>pct</code></p></li>
<li><p><code>total</code></p></li>
<li><p><code>distinct_n</code></p></li>
<li><p><code>distinct_pct</code></p></li>
<li><p><code>distinct_total</code></p></li>
</ul></li>
<li><p>Shift layers</p><ul><li><p><code>n</code></p></li>
<li><p><code>pct</code></p></li>
<li><p><code>total</code></p></li>
</ul></li>
<li><p>Desc layers</p><ul><li><p><code>n</code></p></li>
<li><p><code>mean</code></p></li>
<li><p><code>sd</code></p></li>
<li><p><code>median</code></p></li>
<li><p><code>var</code></p></li>
<li><p><code>min</code></p></li>
<li><p><code>max</code></p></li>
<li><p><code>iqr</code></p></li>
<li><p><code>q1</code></p></li>
<li><p><code>q3</code></p></li>
<li><p><code>missing</code></p></li>
<li><p>Custom summaries created by <code><a href="set_custom_summaries.html">set_custom_summaries()</a></code></p></li>
</ul></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">f_str</span><span class="op">(</span><span class="st">"xx.x (xx.x)"</span>, <span class="va">mean</span>, <span class="va">sd</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> *** Format String ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> xx.x (xx.x)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> *** vars, extracted formats, and settings ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> mean formated as: xx.x</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 	integer length: 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 	decimal length: 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> sd formated as: xx.x</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 	integer length: 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 	decimal length: 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Total Format Size: 11</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">f_str</span><span class="op">(</span><span class="st">"a.a+1 (a.a+2)"</span>, <span class="va">mean</span>, <span class="va">sd</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> *** Format String ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> a.a+1 (a.a+2)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> *** vars, extracted formats, and settings ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> mean formated as: a.a+1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 	integer length: 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 	decimal length: 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> sd formated as: a.a+2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 	integer length: 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 	decimal length: 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Total Format Size: 13</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">f_str</span><span class="op">(</span><span class="st">"xx.a (xx.a+1)"</span>, <span class="va">mean</span>, <span class="va">sd</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> *** Format String ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> xx.a (xx.a+1)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> *** vars, extracted formats, and settings ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> mean formated as: xx.a</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 	integer length: 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 	decimal length: 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> sd formated as: xx.a+1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 	integer length: 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 	decimal length: 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Total Format Size: 13</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">f_str</span><span class="op">(</span><span class="st">"xx.x, xx.x, xx.x"</span>, <span class="va">q1</span>, <span class="va">median</span>, <span class="va">q3</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> *** Format String ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> xx.x, xx.x, xx.x</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> *** vars, extracted formats, and settings ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> q1 formated as: xx.x</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 	integer length: 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 	decimal length: 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> median formated as: xx.x</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 	integer length: 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 	decimal length: 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> q3 formated as: xx.x</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 	integer length: 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 	decimal length: 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Total Format Size: 16</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Eli Miller, Mike Stackhouse, Ashley Tarasiewicz, Nathan Kosiba.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer></div>

  

  

  </body></html>

