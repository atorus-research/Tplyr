<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="The sorting of a table can greatly vary depending on the
  situation at hand. For count layers, when creating tables like adverse
  event summaries, you may wish to order the table by descending occurrence
  within a particular treatment group. But in other situations, such as AEs
  of special interest, or subject disposition, there may be a specific order
  you wish to display values. Tplyr offers solutions to each of these
  situations.
Instead of allowing you to specify a custom sort order, Tplyr instead
  provides you with order variables that can be used to sort your table after
  the data are summarized. Tplyr has a default order in which the table will
  be returned, but the order variables will always persist. This allows you
  to use powerful sorting functions like arrange
  to get your desired order, and in double programming situations, helps your
  validator understand the how you achieved a particular sort order and where
  discrepancies may be coming from.
When creating order variables for a layer, for each 'by' variable Tplyr
  will search for a &amp;lt;VAR&amp;gt;N version of that variable (i.e. VISIT &amp;lt;-&amp;gt; VISITN,
  PARAM &amp;lt;-&amp;gt; PARAMN). If available, this variable will be used for sorting. If
  not available, Tplyr will created a new ordered factor version of that
  variable to use in alphanumeric sorting. This allows the user to control a
  custom sorting order by leaving an existing &amp;lt;VAR&amp;gt;N variable in your dataset
  if it exists, or create one based on the order in which you wish to sort -
  no custom functions in Tplyr required.
Ordering of results is where things start to differ. Different situations
  call for different methods. Descriptive statistics layers keep it simple -
  the order in which you input your formats using
  set_format_strings is the order in which the results will
  appear (with an order variable added). For count layers, Tplyr offers three
  solutions: If there is a &amp;lt;VAR&amp;gt;N version of your target variable, use that.
  If not, if the target variable is a factor, use the factor orders. Finally,
  you can use a specific data point from your results columns. The result
  column can often have multiple data points, between the n counts, percent,
  distinct n, and distinct percent. Tplyr allows you to choose which of these
  values will be used when creating the order columns for a specified result
  column (i.e. based on the treat_var and cols arguments). See
  the 'Sorting a Table' section for more information.
Shift layers sort very similarly to count layers, but to order your row
  shift variable, use an ordered factor."><title>Set the ordering logic for the count layer — set_order_count_method • Tplyr</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Set the ordering logic for the count layer — set_order_count_method"><meta property="og:description" content="The sorting of a table can greatly vary depending on the
  situation at hand. For count layers, when creating tables like adverse
  event summaries, you may wish to order the table by descending occurrence
  within a particular treatment group. But in other situations, such as AEs
  of special interest, or subject disposition, there may be a specific order
  you wish to display values. Tplyr offers solutions to each of these
  situations.
Instead of allowing you to specify a custom sort order, Tplyr instead
  provides you with order variables that can be used to sort your table after
  the data are summarized. Tplyr has a default order in which the table will
  be returned, but the order variables will always persist. This allows you
  to use powerful sorting functions like arrange
  to get your desired order, and in double programming situations, helps your
  validator understand the how you achieved a particular sort order and where
  discrepancies may be coming from.
When creating order variables for a layer, for each 'by' variable Tplyr
  will search for a &amp;lt;VAR&amp;gt;N version of that variable (i.e. VISIT &amp;lt;-&amp;gt; VISITN,
  PARAM &amp;lt;-&amp;gt; PARAMN). If available, this variable will be used for sorting. If
  not available, Tplyr will created a new ordered factor version of that
  variable to use in alphanumeric sorting. This allows the user to control a
  custom sorting order by leaving an existing &amp;lt;VAR&amp;gt;N variable in your dataset
  if it exists, or create one based on the order in which you wish to sort -
  no custom functions in Tplyr required.
Ordering of results is where things start to differ. Different situations
  call for different methods. Descriptive statistics layers keep it simple -
  the order in which you input your formats using
  set_format_strings is the order in which the results will
  appear (with an order variable added). For count layers, Tplyr offers three
  solutions: If there is a &amp;lt;VAR&amp;gt;N version of your target variable, use that.
  If not, if the target variable is a factor, use the factor orders. Finally,
  you can use a specific data point from your results columns. The result
  column can often have multiple data points, between the n counts, percent,
  distinct n, and distinct percent. Tplyr allows you to choose which of these
  values will be used when creating the order columns for a specified result
  column (i.e. based on the treat_var and cols arguments). See
  the 'Sorting a Table' section for more information.
Shift layers sort very similarly to count layers, but to order your row
  shift variable, use an ordered factor."><meta property="og:image" content="https://atorus-research.github.io/Tplyr/reference/figures/Atorus_Stickers_vF_Tplyr.png"><meta property="og:image:alt" content="Tplyr Hex Sticker"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:creator" content="@AtorusR"><meta name="twitter:site" content="@AtorusR"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-165685385-2"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-165685385-2');
</script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">Tplyr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/Tplyr.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <h6 class="dropdown-header" data-toc-skip>Table Vignettes</h6>
    <a class="dropdown-item" href="../articles/table.html">Tplyr Table Properties</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Layer Vignettes</h6>
    <a class="dropdown-item" href="../articles/desc.html">Descriptive Statistic Layers</a>
    <a class="dropdown-item" href="../articles/count.html">Count Layers</a>
    <a class="dropdown-item" href="../articles/shift.html">Shift Layers</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Helpers</h6>
    <a class="dropdown-item" href="../articles/riskdiff.html">Risk Difference</a>
    <a class="dropdown-item" href="../articles/sort.html">Sorting a Tplyr Table</a>
    <a class="dropdown-item" href="../articles/options.html">Tplyr Options</a>
    <a class="dropdown-item" href="../articles/layer_templates.html">Layer Templates</a>
    <a class="dropdown-item" href="../articles/styled-table.html">Producing a Styled Table</a>
    <a class="dropdown-item" href="../articles/denom.html">Totals, Missings, and Denominators</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Metadata</h6>
    <a class="dropdown-item" href="../articles/metadata.html">Tplyr Metadata</a>
    <a class="dropdown-item" href="../articles/custom-metadata.html">Creating Custom Tplyr Metadata</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/atorus-research/Tplyr/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Set the ordering logic for the count layer</h1>
      <small class="dont-index">Source: <a href="https://github.com/atorus-research/Tplyr/blob/main/R/count_bindings.R" class="external-link"><code>R/count_bindings.R</code></a></small>
      <div class="d-none name"><code>ordering.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The sorting of a table can greatly vary depending on the
  situation at hand. For count layers, when creating tables like adverse
  event summaries, you may wish to order the table by descending occurrence
  within a particular treatment group. But in other situations, such as AEs
  of special interest, or subject disposition, there may be a specific order
  you wish to display values. Tplyr offers solutions to each of these
  situations.</p>
<p>Instead of allowing you to specify a custom sort order, Tplyr instead
  provides you with order variables that can be used to sort your table after
  the data are summarized. Tplyr has a default order in which the table will
  be returned, but the order variables will always persist. This allows you
  to use powerful sorting functions like <code><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></code>
  to get your desired order, and in double programming situations, helps your
  validator understand the how you achieved a particular sort order and where
  discrepancies may be coming from.</p>
<p>When creating order variables for a layer, for each 'by' variable Tplyr
  will search for a &lt;VAR&gt;N version of that variable (i.e. VISIT &lt;-&gt; VISITN,
  PARAM &lt;-&gt; PARAMN). If available, this variable will be used for sorting. If
  not available, Tplyr will created a new ordered factor version of that
  variable to use in alphanumeric sorting. This allows the user to control a
  custom sorting order by leaving an existing &lt;VAR&gt;N variable in your dataset
  if it exists, or create one based on the order in which you wish to sort -
  no custom functions in Tplyr required.</p>
<p>Ordering of results is where things start to differ. Different situations
  call for different methods. Descriptive statistics layers keep it simple -
  the order in which you input your formats using
  <code><a href="set_format_strings.html">set_format_strings</a></code> is the order in which the results will
  appear (with an order variable added). For count layers, Tplyr offers three
  solutions: If there is a &lt;VAR&gt;N version of your target variable, use that.
  If not, if the target variable is a factor, use the factor orders. Finally,
  you can use a specific data point from your results columns. The result
  column can often have multiple data points, between the n counts, percent,
  distinct n, and distinct percent. Tplyr allows you to choose which of these
  values will be used when creating the order columns for a specified result
  column (i.e. based on the <code>treat_var</code> and <code>cols</code> arguments). See
  the 'Sorting a Table' section for more information.</p>
<p>Shift layers sort very similarly to count layers, but to order your row
  shift variable, use an ordered factor.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">set_order_count_method</span><span class="op">(</span><span class="va">e</span>, <span class="va">order_count_method</span>, break_ties <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">set_ordering_cols</span><span class="op">(</span><span class="va">e</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">set_result_order_var</span><span class="op">(</span><span class="va">e</span>, <span class="va">result_order_var</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>e</dt>
<dd><p>A <code>count_layer</code> object</p></dd>


<dt>order_count_method</dt>
<dd><p>The logic determining how the rows in the final
layer output will be indexed. Options are 'bycount', 'byfactor', and
'byvarn'.</p></dd>


<dt>break_ties</dt>
<dd><p>In certain cases, a 'bycount' sort will result in conflicts
if the counts aren't unique. break_ties will add a decimal to the sorting
column so resolve conflicts. A character value of 'asc' will add a decimal
based on the alphabetical sorting. 'desc' will do the same
but sort descending in case that is the intention.</p></dd>


<dt>...</dt>
<dd><p>Unquoted variables used to select the columns whose values will be
extracted for ordering.</p></dd>


<dt>result_order_var</dt>
<dd><p>The numeric value the ordering will be done on.
This can be either n, distinct_n, pct, or distinct_pct. Due to the
evaluation of the layer you can add a value that isn't actually being
evaluated, if this happens this will only error out in the ordering.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>Returns the modified layer object. The 'ord_' columns are added
  during the build process.</p>
    </div>
    <div class="section level2">
    <h2 id="sorting-a-table">Sorting a Table<a class="anchor" aria-label="anchor" href="#sorting-a-table"></a></h2>
    <p>When a table is built, the output has several
  ordering(ord_) columns that are appended. The first represents the layer
  index. The index is determined by the order the layer was added to the
  table. Following are the indices for the by variables and the target
  variable. The by variables are ordered based on:</p>
<p></p><ol><li><p>The `by` variable is a factor in the target dataset</p></li>
<li><p>If the variable isn't a factor, but has a &lt;VAR&gt;N variable (i.e. VISIT
  -&gt; VISITN, TRT -&gt; TRTN)</p></li>
<li><p>If the variable is not a factor in the target dataset, it is coerced
  to one and ordered alphabetically.</p></li>
</ol><p>The target variable is ordered depending on the type of layer. See more
  below.</p>
    </div>
    <div class="section level2">
    <h2 id="ordering-a-count-layer">Ordering a Count Layer<a class="anchor" aria-label="anchor" href="#ordering-a-count-layer"></a></h2>
    <p>There are many ways to order a count layer
  depending on the preferences of the table programmer. <code>Tplyr</code> supports
  sorting by a descending amount in a column in the table, sorting by a
  &lt;VAR&gt;N variable, and sorting by a custom order. These can be set using the
  `set_order_count_method` function.</p><dl><dt>Sorting by a numeric
  count</dt>
<dd><p>A selected numeric value from a selected column will be indexed
  based on the descending numeric value. The numeric value extracted defaults
  to 'n' but can be changed with `set_result_order_var`. The column selected
  for sorting defaults to the first value in the treatment group variable. If
  there were arguments passed to the 'cols' argument in the table those must
  be specified with `set_ordering_columns`.</p></dd>
 <dt>Sorting by a 'varn'
  variable</dt>
<dd><p>If the treatment variable has a &lt;VAR&gt;N variable. It can be
  indexed to that variable.</p></dd>
 <dt>Sorting by a factor(Default)</dt>
<dd><p>If a factor
  is found for the target variable in the target dataset that is used to
  order, if no factor is found it is coerced to a factor and sorted
  alphabetically.</p></dd>
 <dt>Sorting a nested count layer</dt>
<dd><p>If two variables are
  targeted by a count layer, two methods can be passed to `set_order_count`.
  If two are passed, the first is used to sort the blocks, the second is used
  to sort the "inside" of the blocks. If one method is passed, that will be
  used to sort both.</p></dd>
 
</dl></div>
    <div class="section level2">
    <h2 id="ordering-a-desc-layer">Ordering a Desc Layer<a class="anchor" aria-label="anchor" href="#ordering-a-desc-layer"></a></h2>
    <p>The order of a desc layer is mostly set
  during the object construction. The by variables are resolved and index
  with the same logic as the count layers. The target variable is ordered
  based on the format strings that were used when the layer was created.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Default sorting by factor</span></span></span>
<span class="r-in"><span><span class="va">t</span> <span class="op">&lt;-</span> <span class="fu"><a href="tplyr_table.html">tplyr_table</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="va">gear</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="layer_attachment.html">add_layer</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="layer_constructors.html">group_count</a></span><span class="op">(</span><span class="va">cyl</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="build.html">build</a></span><span class="op">(</span><span class="va">t</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 3 × 6</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   row_label1 var1_3        var1_4        var1_5        ord_layer_index ord_lay…¹</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> 4          <span style="color: #949494;">"</span> 1 (  6.7%)<span style="color: #949494;">"</span> <span style="color: #949494;">"</span> 8 ( 66.7%)<span style="color: #949494;">"</span> <span style="color: #949494;">"</span> 2 ( 40.0%)<span style="color: #949494;">"</span>               1         1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> 6          <span style="color: #949494;">"</span> 2 ( 13.3%)<span style="color: #949494;">"</span> <span style="color: #949494;">"</span> 4 ( 33.3%)<span style="color: #949494;">"</span> <span style="color: #949494;">"</span> 1 ( 20.0%)<span style="color: #949494;">"</span>               1         2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> 8          <span style="color: #949494;">"</span>12 ( 80.0%)<span style="color: #949494;">"</span> <span style="color: #949494;">"</span> 0 (  0.0%)<span style="color: #949494;">"</span> <span style="color: #949494;">"</span> 2 ( 40.0%)<span style="color: #949494;">"</span>               1         3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># … with abbreviated variable name ¹​ord_layer_1</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Sorting by &lt;VAR&gt;N</span></span></span>
<span class="r-in"><span><span class="va">mtcars</span><span class="op">$</span><span class="va">cylN</span> <span class="op">&lt;-</span> <span class="va">mtcars</span><span class="op">$</span><span class="va">cyl</span></span></span>
<span class="r-in"><span><span class="va">t</span> <span class="op">&lt;-</span> <span class="fu"><a href="tplyr_table.html">tplyr_table</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="va">gear</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="layer_attachment.html">add_layer</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="layer_constructors.html">group_count</a></span><span class="op">(</span><span class="va">cyl</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>      <span class="fu">set_order_count_method</span><span class="op">(</span><span class="st">"byvarn"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Sorting by row count</span></span></span>
<span class="r-in"><span><span class="va">t</span> <span class="op">&lt;-</span> <span class="fu"><a href="tplyr_table.html">tplyr_table</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="va">gear</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="layer_attachment.html">add_layer</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="layer_constructors.html">group_count</a></span><span class="op">(</span><span class="va">cyl</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>      <span class="fu">set_order_count_method</span><span class="op">(</span><span class="st">"bycount"</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>      <span class="co"># Orders based on the 6 gear group</span></span></span>
<span class="r-in"><span>      <span class="fu">set_ordering_cols</span><span class="op">(</span><span class="fl">6</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Sorting by row count by percentages</span></span></span>
<span class="r-in"><span><span class="va">t</span> <span class="op">&lt;-</span> <span class="fu"><a href="tplyr_table.html">tplyr_table</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="va">gear</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="layer_attachment.html">add_layer</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="layer_constructors.html">group_count</a></span><span class="op">(</span><span class="va">cyl</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>      <span class="fu">set_order_count_method</span><span class="op">(</span><span class="st">"bycount"</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>      <span class="fu">set_result_order_var</span><span class="op">(</span><span class="va">pct</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Sorting when you have column arguments in the table</span></span></span>
<span class="r-in"><span><span class="va">t</span> <span class="op">&lt;-</span> <span class="fu"><a href="tplyr_table.html">tplyr_table</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="va">gear</span>, cols <span class="op">=</span> <span class="va">vs</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="layer_attachment.html">add_layer</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="layer_constructors.html">group_count</a></span><span class="op">(</span><span class="va">cyl</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>      <span class="co"># Uses the fourth gear group and the 0 vs group in ordering</span></span></span>
<span class="r-in"><span>      <span class="fu">set_ordering_cols</span><span class="op">(</span><span class="fl">4</span>, <span class="fl">0</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Using a custom factor to order</span></span></span>
<span class="r-in"><span><span class="va">mtcars</span><span class="op">$</span><span class="va">cyl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">$</span><span class="va">cyl</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">6</span>, <span class="fl">4</span>, <span class="fl">8</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">t</span> <span class="op">&lt;-</span> <span class="fu"><a href="tplyr_table.html">tplyr_table</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="va">gear</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="layer_attachment.html">add_layer</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="layer_constructors.html">group_count</a></span><span class="op">(</span><span class="va">cyl</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>      <span class="co"># This is the default but can be used to change the setting if it is</span></span></span>
<span class="r-in"><span>      <span class="co">#set at the table level.</span></span></span>
<span class="r-in"><span>      <span class="fu">set_order_count_method</span><span class="op">(</span><span class="st">"byfactor"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Eli Miller, Mike Stackhouse, Ashley Tarasiewicz, Nathan Kosiba.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer></div>

  

  

  </body></html>

