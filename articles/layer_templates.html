<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Tplyr">
<title>Layer Templates • Tplyr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Layer Templates">
<meta property="og:description" content="Tplyr">
<meta property="og:image" content="https://atorus-research.github.io/Tplyr/reference/figures/Atorus_Stickers_vF_Tplyr.png">
<meta property="og:image:alt" content="Tplyr Hex Sticker">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:creator" content="@AtorusR">
<meta name="twitter:site" content="@AtorusR">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-165685385-2"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-165685385-2');
</script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">Tplyr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/Tplyr.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <h6 class="dropdown-header" data-toc-skip>Table Basics</h6>
    <a class="dropdown-item" href="../articles/table.html">Tplyr Table Properties</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Layer Basics</h6>
    <a class="dropdown-item" href="../articles/desc.html">Descriptive Statistic Layers</a>
    <a class="dropdown-item" href="../articles/count.html">Count Layers</a>
    <a class="dropdown-item" href="../articles/shift.html">Shift Layers</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Table Customization</h6>
    <a class="dropdown-item" href="../articles/general_string_formatting.html">General String Formatting</a>
    <a class="dropdown-item" href="../articles/desc_layer_formatting.html">Advanced Descriptive Statistic Layer Formatting</a>
    <a class="dropdown-item" href="../articles/sort.html">Sorting a Tplyr Table</a>
    <a class="dropdown-item" href="../articles/denom.html">Totals, Missings, and Denominators</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Metadata</h6>
    <a class="dropdown-item" href="../articles/metadata.html">Tplyr Metadata</a>
    <a class="dropdown-item" href="../articles/custom-metadata.html">Creating Custom Tplyr Metadata</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Advanced</h6>
    <a class="dropdown-item" href="../articles/riskdiff.html">Risk Difference</a>
    <a class="dropdown-item" href="../articles/options.html">Tplyr Options</a>
    <a class="dropdown-item" href="../articles/layer_templates.html">Layer Templates</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Post-processing</h6>
    <a class="dropdown-item" href="../articles/post_processing.html">Post-Processing</a>
    <a class="dropdown-item" href="../articles/styled-table.html">Producing a Styled Table</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/atorus-research/Tplyr/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Layer Templates</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/atorus-research/Tplyr/blob/main/vignettes/layer_templates.Rmd" class="external-link"><code>vignettes/layer_templates.Rmd</code></a></small>
      <div class="d-none name"><code>layer_templates.Rmd</code></div>
    </div>

    
    
<p>There are several scenarios where a layer template may be useful.
Some tables, like demographics tables, may have many layers that will
all essentially look the same. Categorical variables will have the same
count layer settings, and continuous variables will have the same desc
layer settings. A template allows a user to build those settings once
per layer, then reference the template when the <strong>Tplyr</strong>
table is actually built. Another scenario might be building a set of
company layer templates that are built for standard tables to reduce the
footprint of code across analyses. In either of these cases, the idea is
the reduce the amount of redundant code necessary to create a table.</p>
<p>Tplyr has already has a couple of mechanisms to reduce redundant
application of formats. For example,
<code>vignettes('tplyr_options')</code> shows how the options
<code>tplyr.count_layer_default_formats</code>,
<code>tplyr.desc_layer_default_formats</code>, and
<code>tplyr.shift_layer_default_formats</code> can be used to create
default format string settings. Additionally, you can set formats table
wide using <code><a href="../reference/table_format_defaults.html">set_count_layer_formats()</a></code>,
<code><a href="../reference/table_format_defaults.html">set_desc_layer_formats()</a></code>, or
<code><a href="../reference/table_format_defaults.html">set_shift_layer_formats()</a></code>. But what these functions and
options <em>don’t</em> allow you to do is pre-set and reuse the settings
for an entire layer, so all of the additional potential layer modifying
functions are ignored. This is where layer templates come in.</p>
<div class="section level2">
<h2 id="basic-templates">Basic Templates<a class="anchor" aria-label="anchor" href="#basic-templates"></a>
</h2>
<p>The functions <code><a href="../reference/layer_templates.html">new_layer_template()</a></code> and
<code><a href="../reference/layer_templates.html">use_template()</a></code> allow a user to create and use layer
templates. Layer templates allow a user to pre-build and reuse an entire
layer configuration, from the layer constructor down to all modifying
functions. Furthermore, users can specify parameters they may want to be
interchangeable. Additionally, layer templates are extensible, so a
template can be use and then further extended with additional layer
modifying functions.</p>
<p>Consider the following example:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/layer_templates.html">new_layer_template</a></span><span class="op">(</span></span>
<span>  <span class="st">"example_template"</span>, </span>
<span>  <span class="fu"><a href="../reference/layer_constructors.html">group_count</a></span><span class="op">(</span><span class="va">...</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>    <span class="fu"><a href="../reference/set_format_strings.html">set_format_strings</a></span><span class="op">(</span><span class="fu"><a href="../reference/f_str.html">f_str</a></span><span class="op">(</span><span class="st">"xx (xx%)"</span>, <span class="va">n</span>, <span class="va">pct</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>In this example, we’ve created a basic layer template. The template
is named “example_template”, and this is the name we’ll use to reference
the template when we want to use it. When the template is created, we
start with the function <code>group_count(...)</code>. Note the use of
the ellipsis (i.e. <code>...</code>). This is a required part of a layer
template. Templates must start with a <strong>Tplyr</strong> layer
constructor, which is one of the function <code><a href="../reference/layer_constructors.html">group_count()</a></code>,
<code><a href="../reference/layer_constructors.html">group_desc()</a></code>, or <code><a href="../reference/layer_constructors.html">group_shift()</a></code>. The ellipsis
is necessary because when the template is used, we are able to pass
arguments directly into the layer constructor. For example:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/tplyr_table.html">tplyr_table</a></span><span class="op">(</span><span class="va">adsl</span>, <span class="va">TRT01P</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/layer_attachment.html">add_layer</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="../reference/layer_templates.html">use_template</a></span><span class="op">(</span><span class="st">"example_template"</span>, <span class="va">RACE</span>, by<span class="op">=</span><span class="va">ETHNIC</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/build.html">build</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">kable</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<table style="width:100%;" class="table">
<colgroup>
<col width="14%">
<col width="20%">
<col width="8%">
<col width="16%">
<col width="15%">
<col width="10%">
<col width="7%">
<col width="7%">
</colgroup>
<thead><tr class="header">
<th align="left">row_label1</th>
<th align="left">row_label2</th>
<th align="left">var1_Placebo</th>
<th align="left">var1_Xanomeline High Dose</th>
<th align="left">var1_Xanomeline Low Dose</th>
<th align="right">ord_layer_index</th>
<th align="right">ord_layer_1</th>
<th align="right">ord_layer_2</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">HISPANIC OR LATINO</td>
<td align="left">AMERICAN INDIAN OR ALASKA NATIVE</td>
<td align="left">0 ( 0%)</td>
<td align="left">0 ( 0%)</td>
<td align="left">0 ( 0%)</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">HISPANIC OR LATINO</td>
<td align="left">BLACK OR AFRICAN AMERICAN</td>
<td align="left">0 ( 0%)</td>
<td align="left">0 ( 0%)</td>
<td align="left">0 ( 0%)</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="left">HISPANIC OR LATINO</td>
<td align="left">WHITE</td>
<td align="left">3 ( 3%)</td>
<td align="left">3 ( 4%)</td>
<td align="left">6 ( 7%)</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="left">NOT HISPANIC OR LATINO</td>
<td align="left">AMERICAN INDIAN OR ALASKA NATIVE</td>
<td align="left">0 ( 0%)</td>
<td align="left">1 ( 1%)</td>
<td align="left">0 ( 0%)</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">NOT HISPANIC OR LATINO</td>
<td align="left">BLACK OR AFRICAN AMERICAN</td>
<td align="left">8 ( 9%)</td>
<td align="left">9 (11%)</td>
<td align="left">6 ( 7%)</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">2</td>
</tr>
<tr class="even">
<td align="left">NOT HISPANIC OR LATINO</td>
<td align="left">WHITE</td>
<td align="left">75 (87%)</td>
<td align="left">71 (85%)</td>
<td align="left">72 (86%)</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">3</td>
</tr>
</tbody>
</table>
<p>Within <code><a href="../reference/layer_templates.html">use_template()</a></code>, the first parameter is the
template name. After that, we supply arguments as we normally would into
<code><a href="../reference/layer_constructors.html">group_count()</a></code>, <code><a href="../reference/layer_constructors.html">group_desc()</a></code>, or
<code><a href="../reference/layer_constructors.html">group_shift()</a></code>. Additionally, note that our formats have
been applied just as they would be if we used
<code><a href="../reference/set_format_strings.html">set_format_strings()</a></code> as specified in the template. Our
template was applied, the table built with all of the settings
appropriately.</p>
<p>An additional feature of layer templates is that they act just as any
other function would in a <strong>Tplyr</strong> layer. This means that
they’re also extensible and can be expanded on directly within a
<strong>Tplyr</strong> table. For example:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/tplyr_table.html">tplyr_table</a></span><span class="op">(</span><span class="va">adsl</span>, <span class="va">TRT01P</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/layer_attachment.html">add_layer</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="../reference/layer_templates.html">use_template</a></span><span class="op">(</span><span class="st">"example_template"</span>, <span class="va">RACE</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>      <span class="fu"><a href="../reference/add_total_row.html">add_total_row</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/build.html">build</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">kable</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="26%">
<col width="10%">
<col width="20%">
<col width="20%">
<col width="12%">
<col width="9%">
</colgroup>
<thead><tr class="header">
<th align="left">row_label1</th>
<th align="left">var1_Placebo</th>
<th align="left">var1_Xanomeline High Dose</th>
<th align="left">var1_Xanomeline Low Dose</th>
<th align="right">ord_layer_index</th>
<th align="right">ord_layer_1</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">AMERICAN INDIAN OR ALASKA NATIVE</td>
<td align="left">0 ( 0%)</td>
<td align="left">1 ( 1%)</td>
<td align="left">0 ( 0%)</td>
<td align="right">1</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">BLACK OR AFRICAN AMERICAN</td>
<td align="left">8 ( 9%)</td>
<td align="left">9 (11%)</td>
<td align="left">6 ( 7%)</td>
<td align="right">1</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="left">WHITE</td>
<td align="left">78 (91%)</td>
<td align="left">74 (88%)</td>
<td align="left">78 (93%)</td>
<td align="right">1</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="left">Total</td>
<td align="left">86 (100%)</td>
<td align="left">84 (100%)</td>
<td align="left">84 (100%)</td>
<td align="right">1</td>
<td align="right">4</td>
</tr>
</tbody>
</table>
<p>Here we show two things - first, that the we called the template
without the by variable argument from the previous example. This allows
a template to have some flexibility depending on the context of its
usage. Furthermore, we added the additional modifier function
<code><a href="../reference/add_total_row.html">add_total_row()</a></code>. In this example, we took the layer as
constructed by the template and then modified that layer further. This
may be useful if most but not all of a layer is reusable. The reusable
portions can be put in a template, and the rest added using normal
<strong>Tplyr</strong> syntax.</p>
<div class="section level3">
<h3 id="templates-with-parameters">Templates With Parameters<a class="anchor" aria-label="anchor" href="#templates-with-parameters"></a>
</h3>
<p>It’s also possible to add interchangeable parameters into a layer
template beyond the group constructor arguments. But this requires some
special syntax. Consider the following template:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/layer_templates.html">new_layer_template</a></span><span class="op">(</span><span class="st">"example_params"</span>,</span>
<span>  <span class="fu"><a href="../reference/layer_constructors.html">group_count</a></span><span class="op">(</span><span class="va">...</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>    <span class="fu"><a href="../reference/set_format_strings.html">set_format_strings</a></span><span class="op">(</span><span class="fu"><a href="../reference/f_str.html">f_str</a></span><span class="op">(</span><span class="st">"xx (xx.x%)"</span>, <span class="va">n</span>, <span class="va">pct</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>    <span class="fu"><a href="../reference/ordering.html">set_order_count_method</a></span><span class="op">(</span><span class="op">{</span><span class="va">sort_meth</span><span class="op">}</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>    <span class="fu"><a href="../reference/ordering.html">set_ordering_cols</a></span><span class="op">(</span><span class="op">{</span><span class="va">sort_col</span><span class="op">}</span><span class="op">)</span></span>
<span> <span class="op">)</span></span></code></pre></div>
<p>In this example, we create a template similar to the first example.
But now we add two more modifying functions,
<code><a href="../reference/ordering.html">set_order_count_method()</a></code> and
<code><a href="../reference/ordering.html">set_ordering_cols()</a></code>. Within these functions, we’ve supplied
interchangeable parameters to the template function, which are
<code>sort_meth</code> and <code>sort_col</code>. In a
<strong>Tplyr</strong> layer template, these parameters are supplied
using curly brackets (i.e. {}).</p>
<p>To specify these arguments when using the templater, we use the
<code><a href="../reference/layer_templates.html">use_template()</a></code> argument <code>add_params</code>. For
example:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/tplyr_table.html">tplyr_table</a></span><span class="op">(</span><span class="va">adsl</span>, <span class="va">TRT01P</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/layer_attachment.html">add_layer</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="../reference/layer_templates.html">use_template</a></span><span class="op">(</span><span class="st">'example_params'</span>, <span class="va">RACE</span>, add_params <span class="op">=</span> </span>
<span>                   <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>                     sort_meth <span class="op">=</span> <span class="st">"bycount"</span>,</span>
<span>                     sort_col <span class="op">=</span> <span class="va">Placebo</span></span>
<span>                   <span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/build.html">build</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">kable</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="26%">
<col width="10%">
<col width="20%">
<col width="20%">
<col width="12%">
<col width="9%">
</colgroup>
<thead><tr class="header">
<th align="left">row_label1</th>
<th align="left">var1_Placebo</th>
<th align="left">var1_Xanomeline High Dose</th>
<th align="left">var1_Xanomeline Low Dose</th>
<th align="right">ord_layer_index</th>
<th align="right">ord_layer_1</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">AMERICAN INDIAN OR ALASKA NATIVE</td>
<td align="left">0 ( 0.0%)</td>
<td align="left">1 ( 1.2%)</td>
<td align="left">0 ( 0.0%)</td>
<td align="right">1</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">BLACK OR AFRICAN AMERICAN</td>
<td align="left">8 ( 9.3%)</td>
<td align="left">9 (10.7%)</td>
<td align="left">6 ( 7.1%)</td>
<td align="right">1</td>
<td align="right">8</td>
</tr>
<tr class="odd">
<td align="left">WHITE</td>
<td align="left">78 (90.7%)</td>
<td align="left">74 (88.1%)</td>
<td align="left">78 (92.9%)</td>
<td align="right">1</td>
<td align="right">78</td>
</tr>
</tbody>
</table>
<p>In the <code>add_params</code> parameter, you must supply a list.
That list must also be named, where the element names (in this example,
<code>sort_meth</code> and <code>sort_col</code>) match the parameter
names in the template itself. If there’s any mismatch between a
template’s parameters and the parameters provided to
<code>add_params</code>, you will encounter an error. The values
supplied to <code>add_param</code> are then exactly the arguments that
you would supply to the matching field within the template (i.e. there’s
no extra quoting using <code><a href="https://rlang.r-lib.org/reference/defusing-advanced.html" class="external-link">quo()</a></code> necessary to pass a
symbol).</p>
</div>
</div>
<div class="section level2">
<h2 id="viewing-and-removing-templates">Viewing and Removing Templates<a class="anchor" aria-label="anchor" href="#viewing-and-removing-templates"></a>
</h2>
<p>If you want to view any available templates in your session, use the
function <code><a href="../reference/layer_templates.html">get_layer_templates()</a></code>.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/layer_templates.html">get_layer_templates</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; $example_template</span></span>
<span><span class="co">#&gt; Template name: example_template</span></span>
<span><span class="co">#&gt; Template parameters: None</span></span>
<span><span class="co">#&gt; Template code:</span></span>
<span><span class="co">#&gt; {</span></span>
<span><span class="co">#&gt; group_count(...) %&gt;% set_format_strings(f_str("xx (xx%)", n, pct))</span></span>
<span><span class="co">#&gt; } </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $example_params</span></span>
<span><span class="co">#&gt; Template name: example_params</span></span>
<span><span class="co">#&gt; Template parameters: sort_meth, sort_col</span></span>
<span><span class="co">#&gt; Template code:</span></span>
<span><span class="co">#&gt; {</span></span>
<span><span class="co">#&gt; group_count(...) %&gt;% set_format_strings(f_str("xx (xx.x%)", n, pct)) %&gt;% set_order_count_method({</span></span>
<span><span class="co">#&gt;     sort_meth</span></span>
<span><span class="co">#&gt; }) %&gt;% set_ordering_cols({</span></span>
<span><span class="co">#&gt;     sort_col</span></span>
<span><span class="co">#&gt; })</span></span>
<span><span class="co">#&gt; }</span></span></code></pre></div>
<p>You can view a specific template using
<code><a href="../reference/layer_templates.html">get_layer_template()</a></code>.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/layer_templates.html">get_layer_template</a></span><span class="op">(</span><span class="st">"example_params"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Template name: example_params</span></span>
<span><span class="co">#&gt; Template parameters: sort_meth, sort_col</span></span>
<span><span class="co">#&gt; Template code:</span></span>
<span><span class="co">#&gt; {</span></span>
<span><span class="co">#&gt; group_count(...) %&gt;% set_format_strings(f_str("xx (xx.x%)", n, pct)) %&gt;% set_order_count_method({</span></span>
<span><span class="co">#&gt;     sort_meth</span></span>
<span><span class="co">#&gt; }) %&gt;% set_ordering_cols({</span></span>
<span><span class="co">#&gt;     sort_col</span></span>
<span><span class="co">#&gt; })</span></span>
<span><span class="co">#&gt; }</span></span></code></pre></div>
<p>Note that layer templates are of class
<code>tplyr_layer_template</code>. They additionally carry the attribute
<code>params</code> that specifies which parameters are available in the
template, which can be seen in the output above.</p>
<p>Finally, if you want to remove a layer from your session, use the
function <code><a href="../reference/layer_templates.html">remove_layer_template()</a></code></p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/layer_templates.html">remove_layer_template</a></span><span class="op">(</span><span class="st">"example_params"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/layer_templates.html">get_layer_templates</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; $example_template</span></span>
<span><span class="co">#&gt; Template name: example_template</span></span>
<span><span class="co">#&gt; Template parameters: None</span></span>
<span><span class="co">#&gt; Template code:</span></span>
<span><span class="co">#&gt; {</span></span>
<span><span class="co">#&gt; group_count(...) %&gt;% set_format_strings(f_str("xx (xx%)", n, pct))</span></span>
<span><span class="co">#&gt; }</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Eli Miller, Mike Stackhouse, Ashley Tarasiewicz.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
