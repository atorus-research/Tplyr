<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Tplyr">
<title>Risk Difference • Tplyr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Risk Difference">
<meta property="og:description" content="Tplyr">
<meta property="og:image" content="https://atorus-research.github.io/Tplyr/reference/figures/Atorus_Stickers_vF_Tplyr.png">
<meta property="og:image:alt" content="Tplyr Hex Sticker">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:creator" content="@AtorusR">
<meta name="twitter:site" content="@AtorusR">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-165685385-2"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-165685385-2');
</script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">Tplyr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/Tplyr.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <h6 class="dropdown-header" data-toc-skip>Table Vignettes</h6>
    <a class="dropdown-item" href="../articles/table.html">Tplyr Table Properties</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Layer Vignettes</h6>
    <a class="dropdown-item" href="../articles/desc.html">Descriptive Statistic Layers</a>
    <a class="dropdown-item" href="../articles/count.html">Count Layers</a>
    <a class="dropdown-item" href="../articles/shift.html">Shift Layers</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Helpers</h6>
    <a class="dropdown-item" href="../articles/riskdiff.html">Risk Difference</a>
    <a class="dropdown-item" href="../articles/sort.html">Sorting a Tplyr Table</a>
    <a class="dropdown-item" href="../articles/options.html">Tplyr Options</a>
    <a class="dropdown-item" href="../articles/layer_templates.html">Layer Templates</a>
    <a class="dropdown-item" href="../articles/styled-table.html">Producing a Styled Table</a>
    <a class="dropdown-item" href="../articles/denom.html">Totals, Missings, and Denominators</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Metadata</h6>
    <a class="dropdown-item" href="../articles/metadata.html">Tplyr Metadata</a>
    <a class="dropdown-item" href="../articles/custom-metadata.html">Creating Custom Tplyr Metadata</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/atorus-research/Tplyr/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="riskdiff_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Risk Difference</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/atorus-research/Tplyr/blob/main/vignettes/riskdiff.Rmd" class="external-link"><code>vignettes/riskdiff.Rmd</code></a></small>
      <div class="d-none name"><code>riskdiff.Rmd</code></div>
    </div>

    
    
<p><strong>Tplyr</strong> does not support, nor do we intend to support, a wide array of statistical methods. Our goal is rather to take your focus as an analyst off the mundane summaries so you can focus on the interesting analysis. That said, there are some things that are common enough that we feel that it’s reasonable for us to include. So let’s take a look at risk difference.</p>
<div class="section level2">
<h2 id="tplyr-implementation">
<strong>Tplyr</strong> Implementation<a class="anchor" aria-label="anchor" href="#tplyr-implementation"></a>
</h2>
<p>Our current implementation of risk difference is solely built on top of the base R function <code><a href="https://rdrr.io/r/stats/prop.test.html" class="external-link">stats::prop.test()</a></code>. For any and all questions about this method, please review the <code><a href="https://rdrr.io/r/stats/prop.test.html" class="external-link">stats::prop.test()</a></code> documentation within R.</p>
<p>Risk difference is built on top of count layers, as it’s a comparison of proportions. To add a risk difference calculation into a count layer, you simply use the function <code><a href="../reference/add_risk_diff.html">add_risk_diff()</a></code>. We made a large effort to make this flow very naturally with the count layer construction, so let’s walk through it step by step.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">t</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tplyr_table.html">tplyr_table</a></span><span class="op">(</span><span class="va">adae</span>, <span class="va">TRTA</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/layer_attachment.html">add_layer</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="../reference/layer_constructors.html">group_count</a></span><span class="op">(</span><span class="va">AEDECOD</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>      <span class="fu"><a href="../reference/set_distinct_by.html">set_distinct_by</a></span><span class="op">(</span><span class="va">USUBJID</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>      <span class="fu"><a href="../reference/add_risk_diff.html">add_risk_diff</a></span><span class="op">(</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'Xanomeline High Dose'</span>, <span class="st">'Placebo'</span><span class="op">)</span>,</span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'Xanomeline Low Dose'</span>, <span class="st">'Placebo'</span><span class="op">)</span></span>
<span>      <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/warning.html" class="external-link">suppressWarnings</a></span><span class="op">(</span><span class="fu"><a href="../reference/build.html">build</a></span><span class="op">(</span><span class="va">t</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">starts_with</a></span><span class="op">(</span><span class="st">"rdiff"</span><span class="op">)</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/everything.html" class="external-link">everything</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">kable</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<table style="width:100%;" class="table">
<colgroup>
<col width="19%">
<col width="18%">
<col width="10%">
<col width="7%">
<col width="14%">
<col width="13%">
<col width="8%">
<col width="6%">
</colgroup>
<thead><tr class="header">
<th align="left">rdiff_Xanomeline High Dose_Placebo</th>
<th align="left">rdiff_Xanomeline Low Dose_Placebo</th>
<th align="left">row_label1</th>
<th align="left">var1_Placebo</th>
<th align="left">var1_Xanomeline High Dose</th>
<th align="left">var1_Xanomeline Low Dose</th>
<th align="right">ord_layer_index</th>
<th align="right">ord_layer_1</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">0.024 (-0.046, 0.094)</td>
<td align="left">0.000 ( 0.000, 0.000)</td>
<td align="left">ACTINIC KERATOSIS</td>
<td align="left">0 ( 0.0%)</td>
<td align="left">1 ( 2.4%)</td>
<td align="left">0 ( 0.0%)</td>
<td align="right">1</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">-0.048 (-0.174, 0.079)</td>
<td align="left">-0.048 (-0.174, 0.079)</td>
<td align="left">ALOPECIA</td>
<td align="left">1 ( 4.8%)</td>
<td align="left">0 ( 0.0%)</td>
<td align="left">0 ( 0.0%)</td>
<td align="right">1</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="left">0.024 (-0.046, 0.094)</td>
<td align="left">0.119 (-0.015, 0.253)</td>
<td align="left">BLISTER</td>
<td align="left">0 ( 0.0%)</td>
<td align="left">1 ( 2.4%)</td>
<td align="left">5 ( 11.9%)</td>
<td align="right">1</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="left">-0.048 (-0.174, 0.079)</td>
<td align="left">-0.048 (-0.174, 0.079)</td>
<td align="left">COLD SWEAT</td>
<td align="left">1 ( 4.8%)</td>
<td align="left">0 ( 0.0%)</td>
<td align="left">0 ( 0.0%)</td>
<td align="right">1</td>
<td align="right">4</td>
</tr>
<tr class="odd">
<td align="left">-0.048 (-0.174, 0.079)</td>
<td align="left">-0.048 (-0.174, 0.079)</td>
<td align="left">DERMATITIS ATOPIC</td>
<td align="left">1 ( 4.8%)</td>
<td align="left">0 ( 0.0%)</td>
<td align="left">0 ( 0.0%)</td>
<td align="right">1</td>
<td align="right">5</td>
</tr>
<tr class="even">
<td align="left">0.000 ( 0.000, 0.000)</td>
<td align="left">0.024 (-0.046, 0.094)</td>
<td align="left">DERMATITIS CONTACT</td>
<td align="left">0 ( 0.0%)</td>
<td align="left">0 ( 0.0%)</td>
<td align="left">1 ( 2.4%)</td>
<td align="right">1</td>
<td align="right">6</td>
</tr>
</tbody>
</table>
<p>Comparisons are specified with two-element character vectors. These are simply your comparison group - the first element, and your reference group - the second. This coincides with how you might see risk difference specified in the header of your mock, where you’ll see something like T1-Placebo. You can provide as many comparisons as you want - the values specified in the comparison just need to be valid treatment groups within your data. This works with any treatment group built using <code><a href="../reference/treat_grps.html">add_treat_grps()</a></code> or <code><a href="../reference/treat_grps.html">add_total_group()</a></code> as well.</p>
<p>The risk difference calculations are displayed in the <code>rdiff</code> columns. There will be an <code>rdiff</code> column for every comparison that is made, following the convention <code>rdiff_&lt;comparison&gt;_&lt;reference&gt;</code>.</p>
<p>Note the use of <code><a href="https://rdrr.io/r/base/warning.html" class="external-link">base::suppressWarnings()</a></code> - if the counts used in <code><a href="https://rdrr.io/r/stats/prop.test.html" class="external-link">stats::prop.test()</a></code> are too low, you’ll get a warning that says “Chi-squared approximation may be incorrect” for every time <code><a href="https://rdrr.io/r/stats/prop.test.html" class="external-link">stats::prop.test()</a></code> is run with counts that are too low… This could happen a lot, but the warning is perfectly valid.</p>
</div>
<div class="section level2">
<h2 id="controlling-presentation">Controlling Presentation<a class="anchor" aria-label="anchor" href="#controlling-presentation"></a>
</h2>
<p>The default values presented within formatted strings in the built table will be:</p>
<ul>
<li>The difference</li>
<li>95% confidence interval low</li>
<li>95% confidence interval high</li>
</ul>
<p>You have a good bit of control over these values though, and this can be controlled in the same way you format the count summaries - using <code><a href="../reference/set_format_strings.html">set_format_strings()</a></code>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">t</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tplyr_table.html">tplyr_table</a></span><span class="op">(</span><span class="va">adae</span>, <span class="va">TRTA</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/layer_attachment.html">add_layer</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="../reference/layer_constructors.html">group_count</a></span><span class="op">(</span><span class="va">AEDECOD</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>      <span class="fu"><a href="../reference/set_distinct_by.html">set_distinct_by</a></span><span class="op">(</span><span class="va">USUBJID</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>      <span class="fu"><a href="../reference/add_risk_diff.html">add_risk_diff</a></span><span class="op">(</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'Xanomeline High Dose'</span>, <span class="st">'Placebo'</span><span class="op">)</span>,</span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'Xanomeline Low Dose'</span>, <span class="st">'Placebo'</span><span class="op">)</span></span>
<span>      <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>      <span class="fu"><a href="../reference/set_format_strings.html">set_format_strings</a></span><span class="op">(</span></span>
<span>        <span class="st">'n_counts'</span> <span class="op">=</span> <span class="fu"><a href="../reference/f_str.html">f_str</a></span><span class="op">(</span><span class="st">'xx (xx.x) [x]'</span>, <span class="va">distinct_n</span>, <span class="va">distinct_pct</span>, <span class="va">n</span><span class="op">)</span>,</span>
<span>        <span class="st">'riskdiff'</span> <span class="op">=</span> <span class="fu"><a href="../reference/f_str.html">f_str</a></span><span class="op">(</span><span class="st">'xx.xxx, xx.xxx, xx.xxx, xx.xxx, xx.xxx'</span>, <span class="va">comp</span>, <span class="va">ref</span>, <span class="va">dif</span>, <span class="va">low</span>, <span class="va">high</span><span class="op">)</span></span>
<span>      <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/warning.html" class="external-link">suppressWarnings</a></span><span class="op">(</span><span class="fu"><a href="../reference/build.html">build</a></span><span class="op">(</span><span class="va">t</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">starts_with</a></span><span class="op">(</span><span class="st">"rdiff"</span><span class="op">)</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/everything.html" class="external-link">everything</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">kable</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="20%">
<col width="20%">
<col width="10%">
<col width="6%">
<col width="13%">
<col width="13%">
<col width="8%">
<col width="6%">
</colgroup>
<thead><tr class="header">
<th align="left">rdiff_Xanomeline High Dose_Placebo</th>
<th align="left">rdiff_Xanomeline Low Dose_Placebo</th>
<th align="left">row_label1</th>
<th align="left">var1_Placebo</th>
<th align="left">var1_Xanomeline High Dose</th>
<th align="left">var1_Xanomeline Low Dose</th>
<th align="right">ord_layer_index</th>
<th align="right">ord_layer_1</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">0.024, 0.000, 0.024, -0.046, 0.094</td>
<td align="left">0.000, 0.000, 0.000, 0.000, 0.000</td>
<td align="left">ACTINIC KERATOSIS</td>
<td align="left">0 ( 0.0) [0]</td>
<td align="left">1 ( 2.4) [1]</td>
<td align="left">0 ( 0.0) [0]</td>
<td align="right">1</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">0.000, 0.048, -0.048, -0.174, 0.079</td>
<td align="left">0.000, 0.048, -0.048, -0.174, 0.079</td>
<td align="left">ALOPECIA</td>
<td align="left">1 ( 4.8) [1]</td>
<td align="left">0 ( 0.0) [0]</td>
<td align="left">0 ( 0.0) [0]</td>
<td align="right">1</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="left">0.024, 0.000, 0.024, -0.046, 0.094</td>
<td align="left">0.119, 0.000, 0.119, -0.015, 0.253</td>
<td align="left">BLISTER</td>
<td align="left">0 ( 0.0) [0]</td>
<td align="left">1 ( 2.4) [2]</td>
<td align="left">5 (11.9) [8]</td>
<td align="right">1</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="left">0.000, 0.048, -0.048, -0.174, 0.079</td>
<td align="left">0.000, 0.048, -0.048, -0.174, 0.079</td>
<td align="left">COLD SWEAT</td>
<td align="left">1 ( 4.8) [3]</td>
<td align="left">0 ( 0.0) [0]</td>
<td align="left">0 ( 0.0) [0]</td>
<td align="right">1</td>
<td align="right">4</td>
</tr>
<tr class="odd">
<td align="left">0.000, 0.048, -0.048, -0.174, 0.079</td>
<td align="left">0.000, 0.048, -0.048, -0.174, 0.079</td>
<td align="left">DERMATITIS ATOPIC</td>
<td align="left">1 ( 4.8) [1]</td>
<td align="left">0 ( 0.0) [0]</td>
<td align="left">0 ( 0.0) [0]</td>
<td align="right">1</td>
<td align="right">5</td>
</tr>
<tr class="even">
<td align="left">0.000, 0.000, 0.000, 0.000, 0.000</td>
<td align="left">0.024, 0.000, 0.024, -0.046, 0.094</td>
<td align="left">DERMATITIS CONTACT</td>
<td align="left">0 ( 0.0) [0]</td>
<td align="left">0 ( 0.0) [0]</td>
<td align="left">1 ( 2.4) [2]</td>
<td align="right">1</td>
<td align="right">6</td>
</tr>
</tbody>
</table>
<p>Take a look at the <code>rdiff</code> columns now - you’ll see they have 5 values. These are:</p>
<ul>
<li>The comparison proportion (i.e. the estimate[1] output from a <code><a href="https://rdrr.io/r/stats/prop.test.html" class="external-link">stats::prop.test()</a></code> object)</li>
<li>The reference proportion (i.e. the estimate[2] output from a <code><a href="https://rdrr.io/r/stats/prop.test.html" class="external-link">stats::prop.test()</a></code> object)</li>
<li>The difference (i.e. estimate[1] - estimate[2])</li>
<li>The lower end of the confidence interval</li>
<li>The upper end of the confidence interval</li>
</ul>
<p>You have the same control over the formatting of the display of these values here as you do with the count summaries. Taking things a step further, you can also pass forward arguments to <code><a href="https://rdrr.io/r/stats/prop.test.html" class="external-link">stats::prop.test()</a></code> using a named list and the <code>args</code> argument in <code><a href="../reference/add_risk_diff.html">add_risk_diff()</a></code>. This wasn’t done using the ellipsis (i.e. <code>...</code>) like typical R functions because it’s already used to capture a varying number of comparisons, but it’s not much more difficult to use:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">t</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tplyr_table.html">tplyr_table</a></span><span class="op">(</span><span class="va">adae</span>, <span class="va">TRTA</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/layer_attachment.html">add_layer</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="../reference/layer_constructors.html">group_count</a></span><span class="op">(</span><span class="va">AEDECOD</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>      <span class="fu"><a href="../reference/set_distinct_by.html">set_distinct_by</a></span><span class="op">(</span><span class="va">USUBJID</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>      <span class="fu"><a href="../reference/add_risk_diff.html">add_risk_diff</a></span><span class="op">(</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'Xanomeline High Dose'</span>, <span class="st">'Placebo'</span><span class="op">)</span>,</span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'Xanomeline Low Dose'</span>, <span class="st">'Placebo'</span><span class="op">)</span>,</span>
<span>        args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>conf.level<span class="op">=</span><span class="fl">0.90</span>, alternative<span class="op">=</span><span class="st">'less'</span>, correct<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span>
<span>      <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>      <span class="fu"><a href="../reference/set_format_strings.html">set_format_strings</a></span><span class="op">(</span></span>
<span>        <span class="st">'n_counts'</span> <span class="op">=</span> <span class="fu"><a href="../reference/f_str.html">f_str</a></span><span class="op">(</span><span class="st">'xx (xx.x) [x]'</span>, <span class="va">distinct_n</span>, <span class="va">distinct_pct</span>, <span class="va">n</span><span class="op">)</span>,</span>
<span>        <span class="st">'riskdiff'</span> <span class="op">=</span> <span class="fu"><a href="../reference/f_str.html">f_str</a></span><span class="op">(</span><span class="st">'xx.xxx, xx.xxx, xx.xxx, xx.xxx, xx.xxx'</span>, <span class="va">comp</span>, <span class="va">ref</span>, <span class="va">dif</span>, <span class="va">low</span>, <span class="va">high</span><span class="op">)</span></span>
<span>      <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/warning.html" class="external-link">suppressWarnings</a></span><span class="op">(</span><span class="fu"><a href="../reference/build.html">build</a></span><span class="op">(</span><span class="va">t</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">starts_with</a></span><span class="op">(</span><span class="st">"rdiff"</span><span class="op">)</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/everything.html" class="external-link">everything</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>  </span>
<span>  <span class="fu">kable</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="20%">
<col width="20%">
<col width="10%">
<col width="6%">
<col width="13%">
<col width="13%">
<col width="8%">
<col width="6%">
</colgroup>
<thead><tr class="header">
<th align="left">rdiff_Xanomeline High Dose_Placebo</th>
<th align="left">rdiff_Xanomeline Low Dose_Placebo</th>
<th align="left">row_label1</th>
<th align="left">var1_Placebo</th>
<th align="left">var1_Xanomeline High Dose</th>
<th align="left">var1_Xanomeline Low Dose</th>
<th align="right">ord_layer_index</th>
<th align="right">ord_layer_1</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">0.024, 0.000, 0.024, -1.000, 0.054</td>
<td align="left">0.000, 0.000, 0.000, -1.000, 0.000</td>
<td align="left">ACTINIC KERATOSIS</td>
<td align="left">0 ( 0.0) [0]</td>
<td align="left">1 ( 2.4) [1]</td>
<td align="left">0 ( 0.0) [0]</td>
<td align="right">1</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">0.000, 0.048, -0.048, -1.000, 0.012</td>
<td align="left">0.000, 0.048, -0.048, -1.000, 0.012</td>
<td align="left">ALOPECIA</td>
<td align="left">1 ( 4.8) [1]</td>
<td align="left">0 ( 0.0) [0]</td>
<td align="left">0 ( 0.0) [0]</td>
<td align="right">1</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="left">0.024, 0.000, 0.024, -1.000, 0.054</td>
<td align="left">0.119, 0.000, 0.119, -1.000, 0.183</td>
<td align="left">BLISTER</td>
<td align="left">0 ( 0.0) [0]</td>
<td align="left">1 ( 2.4) [2]</td>
<td align="left">5 (11.9) [8]</td>
<td align="right">1</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="left">0.000, 0.048, -0.048, -1.000, 0.012</td>
<td align="left">0.000, 0.048, -0.048, -1.000, 0.012</td>
<td align="left">COLD SWEAT</td>
<td align="left">1 ( 4.8) [3]</td>
<td align="left">0 ( 0.0) [0]</td>
<td align="left">0 ( 0.0) [0]</td>
<td align="right">1</td>
<td align="right">4</td>
</tr>
<tr class="odd">
<td align="left">0.000, 0.048, -0.048, -1.000, 0.012</td>
<td align="left">0.000, 0.048, -0.048, -1.000, 0.012</td>
<td align="left">DERMATITIS ATOPIC</td>
<td align="left">1 ( 4.8) [1]</td>
<td align="left">0 ( 0.0) [0]</td>
<td align="left">0 ( 0.0) [0]</td>
<td align="right">1</td>
<td align="right">5</td>
</tr>
<tr class="even">
<td align="left">0.000, 0.000, 0.000, -1.000, 0.000</td>
<td align="left">0.024, 0.000, 0.024, -1.000, 0.054</td>
<td align="left">DERMATITIS CONTACT</td>
<td align="left">0 ( 0.0) [0]</td>
<td align="left">0 ( 0.0) [0]</td>
<td align="left">1 ( 2.4) [2]</td>
<td align="right">1</td>
<td align="right">6</td>
</tr>
</tbody>
</table>
<p>As seen above, using the <code>args</code> argument, we:</p>
<ul>
<li>Changed the confidence interval level to 90% instead of the default 95%</li>
<li>Switched the alternative hypothesis of <code><a href="https://rdrr.io/r/stats/prop.test.html" class="external-link">stats::prop.test()</a></code> to “less” instead of the default “two.sided”</li>
<li>Turned off the Yates’ continuity correction</li>
</ul>
<p>For more information on these parameters, see the documentation for <code><a href="https://rdrr.io/r/stats/prop.test.html" class="external-link">stats::prop.test()</a></code>.</p>
</div>
<div class="section level2">
<h2 id="other-notes">Other Notes<a class="anchor" aria-label="anchor" href="#other-notes"></a>
</h2>
<p>The default of <code><a href="../reference/add_risk_diff.html">add_risk_diff()</a></code> works on the distinct counts available within the count summary.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">t</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tplyr_table.html">tplyr_table</a></span><span class="op">(</span><span class="va">adae</span>, <span class="va">TRTA</span>, where<span class="op">=</span> <span class="va">AEBODSYS</span> <span class="op">==</span> <span class="st">"SKIN AND SUBCUTANEOUS TISSUE DISORDERS"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/pop_data.html">set_pop_data</a></span><span class="op">(</span><span class="va">adsl</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/pop_treat_var.html">set_pop_treat_var</a></span><span class="op">(</span><span class="va">TRT01A</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/where.html">set_pop_where</a></span><span class="op">(</span><span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/layer_attachment.html">add_layer</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="../reference/layer_constructors.html">group_count</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">AEBODSYS</span>, <span class="va">AEDECOD</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>      <span class="fu"><a href="../reference/set_distinct_by.html">set_distinct_by</a></span><span class="op">(</span><span class="va">USUBJID</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>      <span class="fu"><a href="../reference/add_risk_diff.html">add_risk_diff</a></span><span class="op">(</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'Xanomeline High Dose'</span>, <span class="st">'Placebo'</span><span class="op">)</span>,</span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'Xanomeline Low Dose'</span>, <span class="st">'Placebo'</span><span class="op">)</span></span>
<span>      <span class="op">)</span> </span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/warning.html" class="external-link">suppressWarnings</a></span><span class="op">(</span><span class="fu"><a href="../reference/build.html">build</a></span><span class="op">(</span><span class="va">t</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">starts_with</a></span><span class="op">(</span><span class="st">"rdiff"</span><span class="op">)</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/everything.html" class="external-link">everything</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>  </span>
<span>  <span class="fu">kable</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<table style="width:100%;" class="table">
<colgroup>
<col width="13%">
<col width="13%">
<col width="15%">
<col width="15%">
<col width="5%">
<col width="10%">
<col width="9%">
<col width="6%">
<col width="4%">
<col width="4%">
</colgroup>
<thead><tr class="header">
<th align="left">rdiff_Xanomeline High Dose_Placebo</th>
<th align="left">rdiff_Xanomeline Low Dose_Placebo</th>
<th align="left">row_label1</th>
<th align="left">row_label2</th>
<th align="left">var1_Placebo</th>
<th align="left">var1_Xanomeline High Dose</th>
<th align="left">var1_Xanomeline Low Dose</th>
<th align="right">ord_layer_index</th>
<th align="right">ord_layer_1</th>
<th align="right">ord_layer_2</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">0.256 ( 0.104, 0.408)</td>
<td align="left">0.256 ( 0.104, 0.408)</td>
<td align="left">SKIN AND SUBCUTANEOUS TISSUE DISORDERS</td>
<td align="left">SKIN AND SUBCUTANEOUS TISSUE DISORDERS</td>
<td align="left">21 ( 24.4%)</td>
<td align="left">42 ( 50.0%)</td>
<td align="left">42 ( 50.0%)</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">Inf</td>
</tr>
<tr class="even">
<td align="left">0.012 (-0.023, 0.047)</td>
<td align="left">0.000 ( 0.000, 0.000)</td>
<td align="left">SKIN AND SUBCUTANEOUS TISSUE DISORDERS</td>
<td align="left">ACTINIC KERATOSIS</td>
<td align="left">0 ( 0.0%)</td>
<td align="left">1 ( 1.2%)</td>
<td align="left">0 ( 0.0%)</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">-0.012 (-0.046, 0.023)</td>
<td align="left">-0.012 (-0.046, 0.023)</td>
<td align="left">SKIN AND SUBCUTANEOUS TISSUE DISORDERS</td>
<td align="left">ALOPECIA</td>
<td align="left">1 ( 1.2%)</td>
<td align="left">0 ( 0.0%)</td>
<td align="left">0 ( 0.0%)</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">2</td>
</tr>
<tr class="even">
<td align="left">0.012 (-0.023, 0.047)</td>
<td align="left">0.060 (-0.003, 0.122)</td>
<td align="left">SKIN AND SUBCUTANEOUS TISSUE DISORDERS</td>
<td align="left">BLISTER</td>
<td align="left">0 ( 0.0%)</td>
<td align="left">1 ( 1.2%)</td>
<td align="left">5 ( 6.0%)</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">3</td>
</tr>
<tr class="odd">
<td align="left">-0.012 (-0.046, 0.023)</td>
<td align="left">-0.012 (-0.046, 0.023)</td>
<td align="left">SKIN AND SUBCUTANEOUS TISSUE DISORDERS</td>
<td align="left">COLD SWEAT</td>
<td align="left">1 ( 1.2%)</td>
<td align="left">0 ( 0.0%)</td>
<td align="left">0 ( 0.0%)</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">4</td>
</tr>
<tr class="even">
<td align="left">-0.012 (-0.046, 0.023)</td>
<td align="left">-0.012 (-0.046, 0.023)</td>
<td align="left">SKIN AND SUBCUTANEOUS TISSUE DISORDERS</td>
<td align="left">DERMATITIS ATOPIC</td>
<td align="left">1 ( 1.2%)</td>
<td align="left">0 ( 0.0%)</td>
<td align="left">0 ( 0.0%)</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">5</td>
</tr>
</tbody>
</table>
<p>If for whatever reason you’d like to run risk difference on the non-distinct counts, switch the <code>distinct</code> argument to FALSE. <code><a href="../reference/add_risk_diff.html">add_risk_diff()</a></code> also will function on multi-level summaries no different than single level, so no concerns there either.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">t</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tplyr_table.html">tplyr_table</a></span><span class="op">(</span><span class="va">adae</span>, <span class="va">TRTA</span>, where<span class="op">=</span> <span class="va">AEBODSYS</span> <span class="op">==</span> <span class="st">"SKIN AND SUBCUTANEOUS TISSUE DISORDERS"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/layer_attachment.html">add_layer</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="../reference/layer_constructors.html">group_count</a></span><span class="op">(</span><span class="va">AEDECOD</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>      <span class="fu"><a href="../reference/set_distinct_by.html">set_distinct_by</a></span><span class="op">(</span><span class="va">USUBJID</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>      <span class="fu"><a href="../reference/add_risk_diff.html">add_risk_diff</a></span><span class="op">(</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'Xanomeline High Dose'</span>, <span class="st">'Placebo'</span><span class="op">)</span>,</span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'Xanomeline Low Dose'</span>, <span class="st">'Placebo'</span><span class="op">)</span>,</span>
<span>        distinct<span class="op">=</span><span class="cn">FALSE</span></span>
<span>      <span class="op">)</span> </span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/warning.html" class="external-link">suppressWarnings</a></span><span class="op">(</span><span class="fu"><a href="../reference/build.html">build</a></span><span class="op">(</span><span class="va">t</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">starts_with</a></span><span class="op">(</span><span class="st">"rdiff"</span><span class="op">)</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/everything.html" class="external-link">everything</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>  </span>
<span>  <span class="fu">kable</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<table style="width:100%;" class="table">
<colgroup>
<col width="19%">
<col width="18%">
<col width="10%">
<col width="7%">
<col width="14%">
<col width="13%">
<col width="8%">
<col width="6%">
</colgroup>
<thead><tr class="header">
<th align="left">rdiff_Xanomeline High Dose_Placebo</th>
<th align="left">rdiff_Xanomeline Low Dose_Placebo</th>
<th align="left">row_label1</th>
<th align="left">var1_Placebo</th>
<th align="left">var1_Xanomeline High Dose</th>
<th align="left">var1_Xanomeline Low Dose</th>
<th align="right">ord_layer_index</th>
<th align="right">ord_layer_1</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">0.009 (-0.018, 0.036)</td>
<td align="left">0.000 ( 0.000, 0.000)</td>
<td align="left">ACTINIC KERATOSIS</td>
<td align="left">0 ( 0.0%)</td>
<td align="left">1 ( 2.4%)</td>
<td align="left">0 ( 0.0%)</td>
<td align="right">1</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">-0.021 (-0.078, 0.035)</td>
<td align="left">-0.021 (-0.077, 0.035)</td>
<td align="left">ALOPECIA</td>
<td align="left">1 ( 4.8%)</td>
<td align="left">0 ( 0.0%)</td>
<td align="left">0 ( 0.0%)</td>
<td align="right">1</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="left">0.018 (-0.022, 0.058)</td>
<td align="left">0.068 ( 0.008, 0.128)</td>
<td align="left">BLISTER</td>
<td align="left">0 ( 0.0%)</td>
<td align="left">1 ( 2.4%)</td>
<td align="left">5 ( 11.9%)</td>
<td align="right">1</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="left">-0.064 (-0.149, 0.021)</td>
<td align="left">-0.064 (-0.149, 0.021)</td>
<td align="left">COLD SWEAT</td>
<td align="left">1 ( 4.8%)</td>
<td align="left">0 ( 0.0%)</td>
<td align="left">0 ( 0.0%)</td>
<td align="right">1</td>
<td align="right">4</td>
</tr>
<tr class="odd">
<td align="left">-0.021 (-0.078, 0.035)</td>
<td align="left">-0.021 (-0.077, 0.035)</td>
<td align="left">DERMATITIS ATOPIC</td>
<td align="left">1 ( 4.8%)</td>
<td align="left">0 ( 0.0%)</td>
<td align="left">0 ( 0.0%)</td>
<td align="right">1</td>
<td align="right">5</td>
</tr>
<tr class="even">
<td align="left">0.000 ( 0.000, 0.000)</td>
<td align="left">0.017 (-0.021, 0.055)</td>
<td align="left">DERMATITIS CONTACT</td>
<td align="left">0 ( 0.0%)</td>
<td align="left">0 ( 0.0%)</td>
<td align="left">1 ( 2.4%)</td>
<td align="right">1</td>
<td align="right">6</td>
</tr>
</tbody>
</table>
<p>Risk difference also works with the <code>cols</code> argument, but it’s important to understand how the comparisons work in these situation. Here, it’s still the treatment groups that are compared - but the column argument is used as a “by” variable. For example:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">t</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tplyr_table.html">tplyr_table</a></span><span class="op">(</span><span class="va">adae</span>, <span class="va">TRTA</span>, where<span class="op">=</span> <span class="va">AEBODSYS</span> <span class="op">==</span> <span class="st">"SKIN AND SUBCUTANEOUS TISSUE DISORDERS"</span>, cols<span class="op">=</span><span class="va">SEX</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/layer_attachment.html">add_layer</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="../reference/layer_constructors.html">group_count</a></span><span class="op">(</span><span class="va">AEDECOD</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>      <span class="fu"><a href="../reference/set_distinct_by.html">set_distinct_by</a></span><span class="op">(</span><span class="va">USUBJID</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>      <span class="fu"><a href="../reference/add_risk_diff.html">add_risk_diff</a></span><span class="op">(</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'Xanomeline High Dose'</span>, <span class="st">'Placebo'</span><span class="op">)</span>,</span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'Xanomeline Low Dose'</span>, <span class="st">'Placebo'</span><span class="op">)</span></span>
<span>      <span class="op">)</span> </span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/warning.html" class="external-link">suppressWarnings</a></span><span class="op">(</span><span class="fu"><a href="../reference/build.html">build</a></span><span class="op">(</span><span class="va">t</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">starts_with</a></span><span class="op">(</span><span class="st">"rdiff"</span><span class="op">)</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">starts_with</a></span><span class="op">(</span><span class="st">"row"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">kable</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<table style="width:100%;" class="table">
<colgroup>
<col width="22%">
<col width="22%">
<col width="21%">
<col width="21%">
<col width="11%">
</colgroup>
<thead><tr class="header">
<th align="left">rdiff_Xanomeline High Dose_Placebo_F</th>
<th align="left">rdiff_Xanomeline High Dose_Placebo_M</th>
<th align="left">rdiff_Xanomeline Low Dose_Placebo_F</th>
<th align="left">rdiff_Xanomeline Low Dose_Placebo_M</th>
<th align="left">row_label1</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">0.000 ( 0.000, 0.000)</td>
<td align="left">0.024 (-0.046, 0.094)</td>
<td align="left">0.000 ( 0.000, 0.000)</td>
<td align="left">0.000 ( 0.000, 0.000)</td>
<td align="left">ACTINIC KERATOSIS</td>
</tr>
<tr class="even">
<td align="left">-0.048 (-0.174, 0.079)</td>
<td align="left">0.000 ( 0.000, 0.000)</td>
<td align="left">-0.048 (-0.174, 0.079)</td>
<td align="left">0.000 ( 0.000, 0.000)</td>
<td align="left">ALOPECIA</td>
</tr>
<tr class="odd">
<td align="left">0.000 ( 0.000, 0.000)</td>
<td align="left">0.024 (-0.046, 0.094)</td>
<td align="left">0.048 (-0.053, 0.148)</td>
<td align="left">0.071 (-0.042, 0.185)</td>
<td align="left">BLISTER</td>
</tr>
<tr class="even">
<td align="left">0.000 ( 0.000, 0.000)</td>
<td align="left">-0.048 (-0.174, 0.079)</td>
<td align="left">0.000 ( 0.000, 0.000)</td>
<td align="left">-0.048 (-0.174, 0.079)</td>
<td align="left">COLD SWEAT</td>
</tr>
<tr class="odd">
<td align="left">0.000 ( 0.000, 0.000)</td>
<td align="left">-0.048 (-0.174, 0.079)</td>
<td align="left">0.000 ( 0.000, 0.000)</td>
<td align="left">-0.048 (-0.174, 0.079)</td>
<td align="left">DERMATITIS ATOPIC</td>
</tr>
<tr class="even">
<td align="left">0.000 ( 0.000, 0.000)</td>
<td align="left">0.000 ( 0.000, 0.000)</td>
<td align="left">0.000 ( 0.000, 0.000)</td>
<td align="left">0.024 (-0.046, 0.094)</td>
<td align="left">DERMATITIS CONTACT</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="getting-raw-numbers">Getting Raw Numbers<a class="anchor" aria-label="anchor" href="#getting-raw-numbers"></a>
</h2>
<p>Just like you can get the numeric data from a <strong>Tplyr</strong> layer with <code><a href="../reference/get_numeric_data.html">get_numeric_data()</a></code>, we’ve also opened up the door to extract the raw numeric data from risk difference calculations as well. This is done using the function <code><a href="../reference/get_stats_data.html">get_stats_data()</a></code>. The function interface is almost identical to <code><a href="../reference/get_numeric_data.html">get_numeric_data()</a></code>, except for the extra parameter of <code>statistic</code>. Although risk difference is the only statistic implemented in <strong>Tplyr</strong> at the moment (outside of descriptive statistics), we understand that there are multiple methods to calculate risk difference, so we’ve built risk difference in a way that it could be expanded to easily add new methods in the future. And therefore, <code><a href="../reference/get_stats_data.html">get_stats_data()</a></code> the <code>statistic</code> parameter to allow you to differentiate in the situation where there are multiple statistical methods applied to the layer.</p>
<p>The output of <code><a href="../reference/get_stats_data.html">get_stats_data()</a></code> depends on what parameters have been used:</p>
<ul>
<li>If no specific layer has been entered in the <code>layer</code> parameter, then an element will be returned for each layer</li>
<li>If no statistic has been entered in the <code>statistic</code> parameter, an element will be returned for each statistic for each layer</li>
<li>If neither statistic nor layer are entered, a list of lists is returned, where the outer list is each layer and the inside list is the numeric statistic data for that layer.</li>
</ul>
<p>This works best when layers are named, as it makes the output much clearer.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">t</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tplyr_table.html">tplyr_table</a></span><span class="op">(</span><span class="va">adae</span>, <span class="va">TRTA</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/layer_attachment.html">add_layer</a></span><span class="op">(</span>name<span class="op">=</span><span class="st">"PreferredTerm"</span>,</span>
<span>    <span class="fu"><a href="../reference/layer_constructors.html">group_count</a></span><span class="op">(</span><span class="va">AEDECOD</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>      <span class="fu"><a href="../reference/set_distinct_by.html">set_distinct_by</a></span><span class="op">(</span><span class="va">USUBJID</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>      <span class="fu"><a href="../reference/add_risk_diff.html">add_risk_diff</a></span><span class="op">(</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'Xanomeline High Dose'</span>, <span class="st">'Placebo'</span><span class="op">)</span>,</span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'Xanomeline Low Dose'</span>, <span class="st">'Placebo'</span><span class="op">)</span></span>
<span>      <span class="op">)</span> </span>
<span>  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/layer_attachment.html">add_layer</a></span><span class="op">(</span>name<span class="op">=</span><span class="st">"BodySystem"</span>,</span>
<span>    <span class="fu"><a href="../reference/layer_constructors.html">group_count</a></span><span class="op">(</span><span class="va">AEBODSYS</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>      <span class="fu"><a href="../reference/set_distinct_by.html">set_distinct_by</a></span><span class="op">(</span><span class="va">USUBJID</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>      <span class="fu"><a href="../reference/add_risk_diff.html">add_risk_diff</a></span><span class="op">(</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'Xanomeline High Dose'</span>, <span class="st">'Placebo'</span><span class="op">)</span>,</span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'Xanomeline Low Dose'</span>, <span class="st">'Placebo'</span><span class="op">)</span></span>
<span>      <span class="op">)</span> </span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/warning.html" class="external-link">suppressWarnings</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="../reference/get_stats_data.html">get_stats_data</a></span><span class="op">(</span><span class="va">t</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; $PreferredTerm</span></span>
<span><span class="co">#&gt; $PreferredTerm$riskdiff</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 105 × 4</span></span></span>
<span><span class="co">#&gt;    summary_var       measure `Xanomeline High Dose_Placebo` Xanomeline Low Dos…¹</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> ACTINIC KERATOSIS comp                            0.023<span style="text-decoration: underline;">8</span>               0     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> ACTINIC KERATOSIS ref                             0                    0     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> ACTINIC KERATOSIS dif                             0.023<span style="text-decoration: underline;">8</span>               0     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> ACTINIC KERATOSIS low                            -<span style="color: #BB0000;">0.046</span><span style="color: #BB0000; text-decoration: underline;">1</span>               0     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> ACTINIC KERATOSIS high                            0.093<span style="text-decoration: underline;">7</span>               0     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> ALOPECIA          comp                            0                    0     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> ALOPECIA          ref                             0.047<span style="text-decoration: underline;">6</span>               0.047<span style="text-decoration: underline;">6</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> ALOPECIA          dif                            -<span style="color: #BB0000;">0.047</span><span style="color: #BB0000; text-decoration: underline;">6</span>              -<span style="color: #BB0000;">0.047</span><span style="color: #BB0000; text-decoration: underline;">6</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> ALOPECIA          low                            -<span style="color: #BB0000;">0.174</span>               -<span style="color: #BB0000;">0.174</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> ALOPECIA          high                            0.079<span style="text-decoration: underline;">2</span>               0.079<span style="text-decoration: underline;">2</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 95 more rows, and abbreviated variable name</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   ¹​`Xanomeline Low Dose_Placebo`</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $BodySystem</span></span>
<span><span class="co">#&gt; $BodySystem$riskdiff</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 5 × 4</span></span></span>
<span><span class="co">#&gt;   summary_var                            measure Xanomeline High Dose_…¹ Xanom…²</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> SKIN AND SUBCUTANEOUS TISSUE DISORDERS comp                          1       1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> SKIN AND SUBCUTANEOUS TISSUE DISORDERS ref                           1       1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> SKIN AND SUBCUTANEOUS TISSUE DISORDERS dif                           0       0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> SKIN AND SUBCUTANEOUS TISSUE DISORDERS low                           0       0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> SKIN AND SUBCUTANEOUS TISSUE DISORDERS high                          0       0</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with abbreviated variable names ¹​`Xanomeline High Dose_Placebo`,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   ²​`Xanomeline Low Dose_Placebo`</span></span></span></code></pre></div>
<p>Instead of playing around with lists, <code><a href="../reference/get_stats_data.html">get_stats_data()</a></code> is most advantageous if you’d like to extract out some data specifically. Let’s say that you’d like to see just the difference values from the Preferred Term layer in the table above.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/warning.html" class="external-link">suppressWarnings</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="../reference/get_stats_data.html">get_stats_data</a></span><span class="op">(</span><span class="va">t</span>, layer<span class="op">=</span><span class="st">'PreferredTerm'</span>, statistic<span class="op">=</span><span class="st">'riskdiff'</span>, where<span class="op">=</span> <span class="va">measure</span> <span class="op">==</span> <span class="st">"dif"</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">kable</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="22%">
<col width="9%">
<col width="34%">
<col width="33%">
</colgroup>
<thead><tr class="header">
<th align="left">summary_var</th>
<th align="left">measure</th>
<th align="right">Xanomeline High Dose_Placebo</th>
<th align="right">Xanomeline Low Dose_Placebo</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">ACTINIC KERATOSIS</td>
<td align="left">dif</td>
<td align="right">0.0238095</td>
<td align="right">0.0000000</td>
</tr>
<tr class="even">
<td align="left">ALOPECIA</td>
<td align="left">dif</td>
<td align="right">-0.0476190</td>
<td align="right">-0.0476190</td>
</tr>
<tr class="odd">
<td align="left">BLISTER</td>
<td align="left">dif</td>
<td align="right">0.0238095</td>
<td align="right">0.1190476</td>
</tr>
<tr class="even">
<td align="left">COLD SWEAT</td>
<td align="left">dif</td>
<td align="right">-0.0476190</td>
<td align="right">-0.0476190</td>
</tr>
<tr class="odd">
<td align="left">DERMATITIS ATOPIC</td>
<td align="left">dif</td>
<td align="right">-0.0476190</td>
<td align="right">-0.0476190</td>
</tr>
<tr class="even">
<td align="left">DERMATITIS CONTACT</td>
<td align="left">dif</td>
<td align="right">0.0000000</td>
<td align="right">0.0238095</td>
</tr>
</tbody>
</table>
<p>Using this data frame, you have access to the un-formatted numeric values before any rounding or formatting. This gives you flexibility to use these calculations in other contexts, make more precise comparisons in a double programming scenario, or take a deeper look into the calculations that were made if any values in the result warrant further investigation.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Eli Miller, Mike Stackhouse, Ashley Tarasiewicz, Nathan Kosiba.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
