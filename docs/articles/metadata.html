<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Tplyr">
<title>Tplyr Metadata • Tplyr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Tplyr Metadata">
<meta property="og:description" content="Tplyr">
<meta property="og:image" content="https://atorus-research.github.io/Tplyr/reference/figures/Atorus_Stickers_vF_Tplyr.png">
<meta property="og:image:alt" content="Tplyr Hex Sticker">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:creator" content="@AtorusR">
<meta name="twitter:site" content="@AtorusR">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-165685385-2"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-165685385-2');
</script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">Tplyr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/Tplyr.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <h6 class="dropdown-header" data-toc-skip>Table Vignettes</h6>
    <a class="dropdown-item" href="../articles/table.html">Tplyr Table Properties</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Layer Vignettes</h6>
    <a class="dropdown-item" href="../articles/desc.html">Descriptive Statistic Layers</a>
    <a class="dropdown-item" href="../articles/count.html">Count Layers</a>
    <a class="dropdown-item" href="../articles/shift.html">Shift Layers</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Helpers</h6>
    <a class="dropdown-item" href="../articles/desc_layer_formatting.html">Advanced Descriptive Statistic Layer Formatting</a>
    <a class="dropdown-item" href="../articles/riskdiff.html">Risk Difference</a>
    <a class="dropdown-item" href="../articles/sort.html">Sorting a Tplyr Table</a>
    <a class="dropdown-item" href="../articles/options.html">Tplyr Options</a>
    <a class="dropdown-item" href="../articles/layer_templates.html">Layer Templates</a>
    <a class="dropdown-item" href="../articles/styled-table.html">Producing a Styled Table</a>
    <a class="dropdown-item" href="../articles/denom.html">Totals, Missings, and Denominators</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Metadata</h6>
    <a class="dropdown-item" href="../articles/metadata.html">Tplyr Metadata</a>
    <a class="dropdown-item" href="../articles/custom-metadata.html">Creating Custom Tplyr Metadata</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/atorus-research/Tplyr/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Tplyr Metadata</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/atorus-research/Tplyr/blob/main/vignettes/metadata.Rmd" class="external-link"><code>vignettes/metadata.Rmd</code></a></small>
      <div class="d-none name"><code>metadata.Rmd</code></div>
    </div>

    
    
<p><strong>Tplyr</strong> has a bit of a unique design, which might feel
a bit weird as you get used to the package. The process flow of building
a <code><a href="../reference/tplyr_table.html">tplyr_table()</a></code> object first, and then using
<code><a href="../reference/build.html">build()</a></code> to construct the data frame is different than
programming in the tidyverse, or creating a ggplot. Why create the
<code><a href="../reference/tplyr_table.html">tplyr_table()</a></code> object first? Why is the
<code><a href="../reference/tplyr_table.html">tplyr_table()</a></code> object different than the resulting data
frame?</p>
<p>The purpose of the <code><a href="../reference/tplyr_table.html">tplyr_table()</a></code> object is to let
<strong>Tplyr</strong> do more than just summarize data. As you build
the table, all of the metadata around the table being built is
maintained - the target variables being summarized, the grouped
variables by row and column, the filter conditions necessary applied to
the table and each layer. As a user, you provide this information to
create the summary. But what about after the results are produced?
Summarizing data inevitably leads to new questions. Within clinical
summaries, you may want to know which subjects experienced an adverse
event, or why the lab summaries of a particular visit’s descriptive
statistics are abnormal. Normally, you’d write a query to recreate the
data that lead to that particular summary. <strong>Tplyr</strong> now
allows you to immediately extract the input data or metadata that
created an output result, thus providing traceability from the result
back to the source.</p>
<div class="section level2">
<h2 id="generating-the-metadata">Generating the Metadata<a class="anchor" aria-label="anchor" href="#generating-the-metadata"></a>
</h2>
<p>Consider the following example:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">t</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tplyr_table.html">tplyr_table</a></span><span class="op">(</span><span class="va">adsl</span>, <span class="va">TRT01P</span>, where <span class="op">=</span> <span class="va">SAFFL</span> <span class="op">==</span> <span class="st">"Y"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/layer_attachment.html">add_layer</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="../reference/layer_constructors.html">group_count</a></span><span class="op">(</span><span class="va">RACE</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/layer_attachment.html">add_layer</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="../reference/layer_constructors.html">group_desc</a></span><span class="op">(</span><span class="va">AGE</span>, where <span class="op">=</span> <span class="va">EFFFL</span> <span class="op">==</span> <span class="st">"Y"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="va">t</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="../reference/build.html">build</a></span><span class="op">(</span>metadata<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">kable</span><span class="op">(</span><span class="va">dat</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="5%">
<col width="25%">
<col width="9%">
<col width="19%">
<col width="18%">
<col width="12%">
<col width="9%">
</colgroup>
<thead><tr class="header">
<th align="left">row_id</th>
<th align="left">row_label1</th>
<th align="left">var1_Placebo</th>
<th align="left">var1_Xanomeline High Dose</th>
<th align="left">var1_Xanomeline Low Dose</th>
<th align="right">ord_layer_index</th>
<th align="right">ord_layer_1</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">c1_1</td>
<td align="left">AMERICAN INDIAN OR ALASKA NATIVE</td>
<td align="left">0 ( 0.0%)</td>
<td align="left">1 ( 1.2%)</td>
<td align="left">0 ( 0.0%)</td>
<td align="right">1</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">c2_1</td>
<td align="left">BLACK OR AFRICAN AMERICAN</td>
<td align="left">8 ( 9.3%)</td>
<td align="left">9 ( 10.7%)</td>
<td align="left">6 ( 7.1%)</td>
<td align="right">1</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="left">c3_1</td>
<td align="left">WHITE</td>
<td align="left">78 ( 90.7%)</td>
<td align="left">74 ( 88.1%)</td>
<td align="left">78 ( 92.9%)</td>
<td align="right">1</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="left">d1_2</td>
<td align="left">n</td>
<td align="left">79</td>
<td align="left">74</td>
<td align="left">81</td>
<td align="right">2</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">d2_2</td>
<td align="left">Mean (SD)</td>
<td align="left">75.0 ( 8.43)</td>
<td align="left">73.9 ( 7.87)</td>
<td align="left">76.1 ( 8.02)</td>
<td align="right">2</td>
<td align="right">2</td>
</tr>
<tr class="even">
<td align="left">d3_2</td>
<td align="left">Median</td>
<td align="left">76.0</td>
<td align="left">75.5</td>
<td align="left">78.0</td>
<td align="right">2</td>
<td align="right">3</td>
</tr>
<tr class="odd">
<td align="left">d4_2</td>
<td align="left">Q1, Q3</td>
<td align="left">69.5, 81.0</td>
<td align="left">70.2, 79.0</td>
<td align="left">71.0, 82.0</td>
<td align="right">2</td>
<td align="right">4</td>
</tr>
<tr class="even">
<td align="left">d5_2</td>
<td align="left">Min, Max</td>
<td align="left">52, 88</td>
<td align="left">56, 88</td>
<td align="left">51, 88</td>
<td align="right">2</td>
<td align="right">5</td>
</tr>
<tr class="odd">
<td align="left">d6_2</td>
<td align="left">Missing</td>
<td align="left">0</td>
<td align="left">0</td>
<td align="left">0</td>
<td align="right">2</td>
<td align="right">6</td>
</tr>
</tbody>
</table>
<p>To trigger the creation of metadata, the <code><a href="../reference/build.html">build()</a></code>
function has a new argument <code>metadata</code>. By specifying
<code>TRUE</code>, the underlying metadata within <strong>Tplyr</strong>
are prepared in an extractable format. This is the only action a user
needs to specify for this action to take place.</p>
<p>When the <code>metadata</code> argument is used, a new column will be
produced in the output dataframe called <code>row_id</code>. The
<code>row_id</code> variable provides a persistent reference to a row of
interest, even if the output dataframe is sorted. If you review
<code><a href="../articles/styled-table.html">vignette("styled-table")</a></code>, note that we expect a certain
amount of post processing and styling of the built data frame from
Tplyr, to let you use whatever other packages you prefer. As such, this
reference ID is necessary.</p>
</div>
<div class="section level2">
<h2 id="extracting-the-input-source">Extracting The Input Source<a class="anchor" aria-label="anchor" href="#extracting-the-input-source"></a>
</h2>
<p>So, let’s cut to the chase. The most likely way you would use this
metadata is to pull out the source data that created a cell. For this,
we’ve provided the function <code><a href="../reference/get_meta_subset.html">get_meta_subset()</a></code>. The only
information that you need is the <code>row_id</code> and column name of
the result cell of interest. For example, looking at the result above,
what if we want to know who the 8 subjects in the Placebo group who
where Black or African American:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/get_meta_subset.html">get_meta_subset</a></span><span class="op">(</span><span class="va">t</span>, <span class="st">'c2_1'</span>, <span class="st">'var1_Placebo'</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">kable</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">USUBJID</th>
<th align="left">TRT01P</th>
<th align="left">SAFFL</th>
<th align="left">RACE</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">01-701-1203</td>
<td align="left">Placebo</td>
<td align="left">Y</td>
<td align="left">BLACK OR AFRICAN AMERICAN</td>
</tr>
<tr class="even">
<td align="left">01-701-1363</td>
<td align="left">Placebo</td>
<td align="left">Y</td>
<td align="left">BLACK OR AFRICAN AMERICAN</td>
</tr>
<tr class="odd">
<td align="left">01-705-1282</td>
<td align="left">Placebo</td>
<td align="left">Y</td>
<td align="left">BLACK OR AFRICAN AMERICAN</td>
</tr>
<tr class="even">
<td align="left">01-706-1041</td>
<td align="left">Placebo</td>
<td align="left">Y</td>
<td align="left">BLACK OR AFRICAN AMERICAN</td>
</tr>
<tr class="odd">
<td align="left">01-708-1286</td>
<td align="left">Placebo</td>
<td align="left">Y</td>
<td align="left">BLACK OR AFRICAN AMERICAN</td>
</tr>
<tr class="even">
<td align="left">01-708-1296</td>
<td align="left">Placebo</td>
<td align="left">Y</td>
<td align="left">BLACK OR AFRICAN AMERICAN</td>
</tr>
<tr class="odd">
<td align="left">01-708-1378</td>
<td align="left">Placebo</td>
<td align="left">Y</td>
<td align="left">BLACK OR AFRICAN AMERICAN</td>
</tr>
<tr class="even">
<td align="left">01-711-1036</td>
<td align="left">Placebo</td>
<td align="left">Y</td>
<td align="left">BLACK OR AFRICAN AMERICAN</td>
</tr>
</tbody>
</table>
<p>By using the <code>row_id</code> and column, the dataframe is pulled
right out for us. Notice that <code>USUBJID</code> was included by
default, even though <strong>Tplyr</strong> there’s no reference
anywhere in the <code><a href="../reference/tplyr_table.html">tplyr_table()</a></code> to the variable
<code>USUBJID</code>. This is because <code><a href="../reference/get_meta_subset.html">get_meta_subset()</a></code> has
an additional argument <code>add_cols</code> that allows you to specify
additional columns you want included in the resulting dataframe, and has
a default of USUBJID. So let’s say we want additionally include the
variable <code>SEX</code>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/get_meta_subset.html">get_meta_subset</a></span><span class="op">(</span><span class="va">t</span>, <span class="st">'c2_1'</span>, <span class="st">'var1_Placebo'</span>, add_cols <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">USUBJID</span>, <span class="va">SEX</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">kable</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">USUBJID</th>
<th align="left">SEX</th>
<th align="left">TRT01P</th>
<th align="left">SAFFL</th>
<th align="left">RACE</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">01-701-1203</td>
<td align="left">F</td>
<td align="left">Placebo</td>
<td align="left">Y</td>
<td align="left">BLACK OR AFRICAN AMERICAN</td>
</tr>
<tr class="even">
<td align="left">01-701-1363</td>
<td align="left">F</td>
<td align="left">Placebo</td>
<td align="left">Y</td>
<td align="left">BLACK OR AFRICAN AMERICAN</td>
</tr>
<tr class="odd">
<td align="left">01-705-1282</td>
<td align="left">F</td>
<td align="left">Placebo</td>
<td align="left">Y</td>
<td align="left">BLACK OR AFRICAN AMERICAN</td>
</tr>
<tr class="even">
<td align="left">01-706-1041</td>
<td align="left">F</td>
<td align="left">Placebo</td>
<td align="left">Y</td>
<td align="left">BLACK OR AFRICAN AMERICAN</td>
</tr>
<tr class="odd">
<td align="left">01-708-1286</td>
<td align="left">F</td>
<td align="left">Placebo</td>
<td align="left">Y</td>
<td align="left">BLACK OR AFRICAN AMERICAN</td>
</tr>
<tr class="even">
<td align="left">01-708-1296</td>
<td align="left">M</td>
<td align="left">Placebo</td>
<td align="left">Y</td>
<td align="left">BLACK OR AFRICAN AMERICAN</td>
</tr>
<tr class="odd">
<td align="left">01-708-1378</td>
<td align="left">M</td>
<td align="left">Placebo</td>
<td align="left">Y</td>
<td align="left">BLACK OR AFRICAN AMERICAN</td>
</tr>
<tr class="even">
<td align="left">01-711-1036</td>
<td align="left">M</td>
<td align="left">Placebo</td>
<td align="left">Y</td>
<td align="left">BLACK OR AFRICAN AMERICAN</td>
</tr>
</tbody>
</table>
<p>Variables should be provided using <code><a href="https://dplyr.tidyverse.org/reference/vars.html" class="external-link">dplyr::vars()</a></code>, just
like the <code>cols</code> argument on <code><a href="../reference/tplyr_table.html">tplyr_table()</a></code> and
the <code>by</code> arguments in each layer type.</p>
<p>As mentioned, the input source data can be extracted for any result
cell created by Tplyr. So let’s say we want to know the subjects
relevant for the descriptive statistics around age in the Xanomeline
High Dose group:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/get_meta_subset.html">get_meta_subset</a></span><span class="op">(</span><span class="va">t</span>, <span class="st">'d1_2'</span>, <span class="st">'var1_Xanomeline High Dose'</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">kable</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">USUBJID</th>
<th align="left">TRT01P</th>
<th align="left">EFFFL</th>
<th align="left">SAFFL</th>
<th align="right">AGE</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">01-701-1028</td>
<td align="left">Xanomeline High Dose</td>
<td align="left">Y</td>
<td align="left">Y</td>
<td align="right">71</td>
</tr>
<tr class="even">
<td align="left">01-701-1034</td>
<td align="left">Xanomeline High Dose</td>
<td align="left">Y</td>
<td align="left">Y</td>
<td align="right">77</td>
</tr>
<tr class="odd">
<td align="left">01-701-1133</td>
<td align="left">Xanomeline High Dose</td>
<td align="left">Y</td>
<td align="left">Y</td>
<td align="right">81</td>
</tr>
<tr class="even">
<td align="left">01-701-1146</td>
<td align="left">Xanomeline High Dose</td>
<td align="left">Y</td>
<td align="left">Y</td>
<td align="right">75</td>
</tr>
<tr class="odd">
<td align="left">01-701-1148</td>
<td align="left">Xanomeline High Dose</td>
<td align="left">Y</td>
<td align="left">Y</td>
<td align="right">57</td>
</tr>
<tr class="even">
<td align="left">01-701-1180</td>
<td align="left">Xanomeline High Dose</td>
<td align="left">Y</td>
<td align="left">Y</td>
<td align="right">56</td>
</tr>
<tr class="odd">
<td align="left">01-701-1181</td>
<td align="left">Xanomeline High Dose</td>
<td align="left">Y</td>
<td align="left">Y</td>
<td align="right">79</td>
</tr>
<tr class="even">
<td align="left">01-701-1239</td>
<td align="left">Xanomeline High Dose</td>
<td align="left">Y</td>
<td align="left">Y</td>
<td align="right">56</td>
</tr>
<tr class="odd">
<td align="left">01-701-1275</td>
<td align="left">Xanomeline High Dose</td>
<td align="left">Y</td>
<td align="left">Y</td>
<td align="right">61</td>
</tr>
<tr class="even">
<td align="left">01-701-1287</td>
<td align="left">Xanomeline High Dose</td>
<td align="left">Y</td>
<td align="left">Y</td>
<td align="right">56</td>
</tr>
</tbody>
</table>
<p><em>Note: Trimmed for space</em></p>
<p>Notice how the columns returned are different. First off, within the
summary above, we pulled results from the descriptive statistics layer.
The target variable for this layer was <code>AGE</code>, and as such
<code>AGE</code> is returned in the resulting output. Additionally, a
layer level <code>where</code> argument was used to subset to
<code>EFFFL == "Y"</code>, which leads to <code>EFFFL</code> being
included in the output as well.</p>
</div>
<div class="section level2">
<h2 id="extracting-a-result-cells-metadata">Extracting a Result Cell’s Metadata<a class="anchor" aria-label="anchor" href="#extracting-a-result-cells-metadata"></a>
</h2>
<p>To extract the dataframe in <code><a href="../reference/get_meta_subset.html">get_meta_subset()</a></code>, the
metadata of the result cell needs to first be extracted. This metadata
can be directly accessed using the function
<code><a href="../reference/get_meta_result.html">get_meta_result()</a></code>. Using the last example of
<code><a href="../reference/get_meta_subset.html">get_meta_subset()</a></code> above:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/get_meta_result.html">get_meta_result</a></span><span class="op">(</span><span class="va">t</span>, <span class="st">'d1_2'</span>, <span class="st">'var1_Xanomeline High Dose'</span><span class="op">)</span></span>
<span><span class="co">#&gt; tplyr_meta: 4 names, 3 filters</span></span>
<span><span class="co">#&gt; Names:</span></span>
<span><span class="co">#&gt;     TRT01P, EFFFL, SAFFL, AGE </span></span>
<span><span class="co">#&gt; Filters:</span></span>
<span><span class="co">#&gt;     TRT01P == c("Xanomeline High Dose"), EFFFL == "Y", SAFFL == "Y"</span></span></code></pre></div>
<p>The resulting output is a new object <strong>Tplyr</strong> called
<code><a href="../reference/tplyr_meta.html">tplyr_meta()</a></code>. This is a container of a relevent metadata
for a specific result. The object itself is a list with two elements:
<code>names</code> and <code>filters</code>.</p>
<p>The <code>names</code> element contains quosures for each variable
relevant to a specific result. This will include the target variable,
the <code>by</code> variables used on the layer, the <code>cols</code>
variables used on the table, and all variables included in any filter
condition relevant to create the result.</p>
<p>The <code>filters</code> element contains each filter condition
(provided as calls) necessary to create a particular cell. This will
include the table level <code>where</code> argument, the layer level
<code>where</code> argument, the filter condition for the specific value
of any <code>by</code> variable or <code>cols</code> variable necessary
to create the cell, and similarly the filter for the treatment group of
interest.</p>
<p>The results are provided this was so that they can be unpacked
directly into <code>dplyr</code> syntax when necessary, which is exactly
what happens in <code><a href="../reference/get_meta_subset.html">get_meta_subset()</a></code>. For example:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">m</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_meta_result.html">get_meta_result</a></span><span class="op">(</span><span class="va">t</span>, <span class="st">'d1_2'</span>, <span class="st">'var1_Xanomeline High Dose'</span><span class="op">)</span></span>
<span></span>
<span><span class="va">adsl</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">!</span><span class="op">!</span><span class="op">!</span><span class="va">m</span><span class="op">$</span><span class="va">filters</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">!</span><span class="op">!</span><span class="op">!</span><span class="va">m</span><span class="op">$</span><span class="va">names</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">kable</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">TRT01P</th>
<th align="left">EFFFL</th>
<th align="left">SAFFL</th>
<th align="right">AGE</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Xanomeline High Dose</td>
<td align="left">Y</td>
<td align="left">Y</td>
<td align="right">71</td>
</tr>
<tr class="even">
<td align="left">Xanomeline High Dose</td>
<td align="left">Y</td>
<td align="left">Y</td>
<td align="right">77</td>
</tr>
<tr class="odd">
<td align="left">Xanomeline High Dose</td>
<td align="left">Y</td>
<td align="left">Y</td>
<td align="right">81</td>
</tr>
<tr class="even">
<td align="left">Xanomeline High Dose</td>
<td align="left">Y</td>
<td align="left">Y</td>
<td align="right">75</td>
</tr>
<tr class="odd">
<td align="left">Xanomeline High Dose</td>
<td align="left">Y</td>
<td align="left">Y</td>
<td align="right">57</td>
</tr>
<tr class="even">
<td align="left">Xanomeline High Dose</td>
<td align="left">Y</td>
<td align="left">Y</td>
<td align="right">56</td>
</tr>
<tr class="odd">
<td align="left">Xanomeline High Dose</td>
<td align="left">Y</td>
<td align="left">Y</td>
<td align="right">79</td>
</tr>
<tr class="even">
<td align="left">Xanomeline High Dose</td>
<td align="left">Y</td>
<td align="left">Y</td>
<td align="right">56</td>
</tr>
<tr class="odd">
<td align="left">Xanomeline High Dose</td>
<td align="left">Y</td>
<td align="left">Y</td>
<td align="right">61</td>
</tr>
<tr class="even">
<td align="left">Xanomeline High Dose</td>
<td align="left">Y</td>
<td align="left">Y</td>
<td align="right">56</td>
</tr>
</tbody>
</table>
<p><em>Note: Trimmed for space</em></p>
<p>But - who says you can’t let your imagination run wild?</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"adsl %&gt;%\n"</span>,</span>
<span>  <span class="st">"   filter(\n      "</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map_chr</a></span><span class="op">(</span><span class="va">m</span><span class="op">$</span><span class="va">filters</span>, <span class="op">~</span> <span class="fu">rlang</span><span class="fu">::</span><span class="fu"><a href="https://rlang.r-lib.org/reference/as_label.html" class="external-link">as_label</a></span><span class="op">(</span><span class="va">.</span><span class="op">)</span><span class="op">)</span>, collpase<span class="op">=</span><span class="st">",\n      "</span><span class="op">)</span>,</span>
<span>  <span class="st">") %&gt;%\n"</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"   select("</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map_chr</a></span><span class="op">(</span><span class="va">m</span><span class="op">$</span><span class="va">names</span>, <span class="fu">rlang</span><span class="fu">::</span><span class="va"><a href="https://rlang.r-lib.org/reference/as_label.html" class="external-link">as_label</a></span><span class="op">)</span>, collapse<span class="op">=</span><span class="st">", "</span><span class="op">)</span>, <span class="st">")"</span>, sep<span class="op">=</span><span class="st">""</span><span class="op">)</span></span>
<span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="va">adsl</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span></span>
<span>       <span class="va">TRT01P</span> <span class="op">==</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Xanomeline High Dose"</span><span class="op">)</span> ,</span>
<span>       <span class="va">EFFFL</span> <span class="op">==</span> <span class="st">"Y"</span> ,</span>
<span>       <span class="va">SAFFL</span> <span class="op">==</span> <span class="st">"Y"</span> ,</span>
<span>       <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">TRT01P</span>, <span class="va">EFFFL</span>, <span class="va">SAFFL</span>, <span class="va">AGE</span><span class="op">)</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="so-what-does-this-get-me">So, What Does This Get Me?<a class="anchor" aria-label="anchor" href="#so-what-does-this-get-me"></a>
</h2>
<p>So we get get metadata around a result cell, and we can get the exact
results from a result cell. You just need a row ID and a column name.
But - what does that get you? You can query your tables - and that’s
great. But how do you <em>use</em> that.</p>
<p>The idea behind this is really to support <a href="https://shiny.rstudio.com/" class="external-link">Shiny</a>. Consider this minimal
application. Click any of the result cells within the table and see what
happens.</p>
<iframe src="https://michael-stackhouse.shinyapps.io/Tplyr-shiny-demo/?showcase=0" width="850" height="900px" data-external="1" style="border: 1px solid #464646;" allowfullscreen allow="autoplay">
</iframe>
<p><em>Source code available <a href="https://github.com/atorus-research/Tplyr-shiny-demo" class="external-link">here</a></em></p>
<p><em>That’s</em> what this is all about. The persistent row_id and
column selection enables you to use something like Shiny to
automatically query a cell based on its position in a table. Using click
events and a package like <a href="https://glin.github.io/reactable/" class="external-link">reactable</a>, you can pick up
the row and column selected and pass that information into
<code><a href="../reference/get_meta_result.html">get_meta_result()</a></code>. Once you get the resulting data frame,
it’s up to you what you do with it, and you have the world of Shiny at
the tip of your fingers.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Eli Miller, Mike Stackhouse, Ashley Tarasiewicz, Nathan Kosiba.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
