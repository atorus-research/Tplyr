<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Extract the subset of data based on result metadata — get_meta_subset • Tplyr</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/yeti/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Extract the subset of data based on result metadata — get_meta_subset"><meta property="og:description" content="Given a row_id value and a result column, this function will return the
subset of data referenced by the tplyr_meta object associated with that
'cell'."><meta property="og:image" content="/reference/figures/Atorus_Stickers_vF_Tplyr.png"><meta property="og:image:alt" content="Tplyr Hex Sticker"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:creator" content="@AtorusR"><meta name="twitter:site" content="@AtorusR"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-165685385-2"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-165685385-2');
</script></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">Tplyr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.4.4.9001</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/Tplyr.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li class="divider">
    <li class="dropdown-header">Table Vignettes</li>
    <li>
      <a href="../articles/table.html">Tplyr Table Properties</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Layer Vignettes</li>
    <li>
      <a href="../articles/desc.html">Descriptive Statistic Layers</a>
    </li>
    <li>
      <a href="../articles/count.html">Count Layers</a>
    </li>
    <li>
      <a href="../articles/shift.html">Shift Layers</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Helpers</li>
    <li>
      <a href="../articles/riskdiff.html">Risk Difference</a>
    </li>
    <li>
      <a href="../articles/sort.html">Sorting a Tplyr Table</a>
    </li>
    <li>
      <a href="../articles/options.html">Tplyr Options</a>
    </li>
    <li>
      <a href="../articles/layer_templates.html">Layer Templates</a>
    </li>
    <li>
      <a href="../articles/styled-table.html">Producing a Styled Table</a>
    </li>
    <li>
      <a href="../articles/denom.html">Totals, Missings, and Denominators</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Metadata</li>
    <li>
      <a href="../articles/metadata.html">Tplyr Metadata</a>
    </li>
    <li>
      <a href="../articles/custom-metadata.html">Creating Custom Tplyr Metadata</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/atorus-research/Tplyr/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Extract the subset of data based on result metadata</h1>
    <small class="dont-index">Source: <a href="https://github.com/atorus-research/Tplyr/blob/HEAD/R/meta_utils.R" class="external-link"><code>R/meta_utils.R</code></a></small>
    <div class="hidden name"><code>get_meta_subset.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Given a row_id value and a result column, this function will return the
subset of data referenced by the tplyr_meta object associated with that
'cell'.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">get_meta_subset</span><span class="op">(</span><span class="va">x</span>, <span class="va">row_id</span>, <span class="va">column</span>, add_cols <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">USUBJID</span><span class="op">)</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for data.frame</span></span>
<span><span class="fu">get_meta_subset</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  <span class="va">row_id</span>,</span>
<span>  <span class="va">column</span>,</span>
<span>  add_cols <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">USUBJID</span><span class="op">)</span>,</span>
<span>  target <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for tplyr_table</span></span>
<span><span class="fu">get_meta_subset</span><span class="op">(</span><span class="va">x</span>, <span class="va">row_id</span>, <span class="va">column</span>, add_cols <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">USUBJID</span><span class="op">)</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>x</dt>
<dd><p>A built Tplyr table or a dataframe</p></dd>


<dt>row_id</dt>
<dd><p>The row_id value of the desired cell, provided as a character
string</p></dd>


<dt>column</dt>
<dd><p>The result column of interest, provided as a character string</p></dd>


<dt>add_cols</dt>
<dd><p>Additional columns to include in subset data.frame output</p></dd>


<dt>...</dt>
<dd><p>additional arguments</p></dd>


<dt>target</dt>
<dd><p>A data frame to be subset (if not pulled from a Tplyr table)</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>A data.frame</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>If a Tplyr table is built with the <code>metadata=TRUE</code> option specified, then
metadata is assembled behind the scenes to provide traceability on each
result cell derived. The functions <code><a href="get_meta_result.html">get_meta_result()</a></code> and
<code>get_meta_subset()</code> allow you to access that metadata by using an ID provided
in the row_id column and the column name of the result you'd like to access.
The purpose is of the row_id variable instead of a simple row index is to
provide a sort resistant reference of the originating column, so the output
Tplyr table can be sorted in any order but the metadata are still easily
accessible.</p>
<p>The <code>tplyr_meta</code> object provided a list with two elements - names and
filters. The metadata contain every column from the target data.frame of the
Tplyr table that factored into the specified result cell, and the filters
contains all the necessary filters to subset to data summarized to create the
specified result cell. <code>get_meta_subset()</code> additionally provides a parameter
to specify any additional columns you would like to include in the returned
subset data frame.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">t</span> <span class="op">&lt;-</span> <span class="fu"><a href="tplyr_table.html">tplyr_table</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="va">cyl</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="layer_attachment.html">add_layer</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="layer_constructors.html">group_desc</a></span><span class="op">(</span><span class="va">hp</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="va">t</span> <span class="op"><a href="pipe.html">%&gt;%</a></span> <span class="fu"><a href="build.html">build</a></span><span class="op">(</span>metadata <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">get_meta_subset</span><span class="op">(</span><span class="va">t</span>, <span class="st">'d1_1'</span>, <span class="st">'var1_4'</span>, add_cols <span class="op">=</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">carb</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                carb cyl  hp</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Datsun 710        1   4  93</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 240D         2   4  62</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 230          2   4  95</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Fiat 128          1   4  66</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Honda Civic       2   4  52</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Toyota Corolla    1   4  65</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Toyota Corona     1   4  97</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Fiat X1-9         1   4  66</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Porsche 914-2     2   4  91</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Lotus Europa      2   4 113</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Volvo 142E        2   4 109</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">m</span> <span class="op">&lt;-</span> <span class="va">t</span><span class="op">$</span><span class="va">metadata</span></span></span>
<span class="r-in"><span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="va">t</span><span class="op">$</span><span class="va">target</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">get_meta_subset</span><span class="op">(</span><span class="va">t</span>, <span class="st">'d1_1'</span>, <span class="st">'var1_4'</span>, add_cols <span class="op">=</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">carb</span><span class="op">)</span>, target <span class="op">=</span> <span class="va">target</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                carb cyl  hp</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Datsun 710        1   4  93</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 240D         2   4  62</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 230          2   4  95</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Fiat 128          1   4  66</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Honda Civic       2   4  52</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Toyota Corolla    1   4  65</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Toyota Corona     1   4  97</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Fiat X1-9         1   4  66</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Porsche 914-2     2   4  91</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Lotus Europa      2   4 113</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Volvo 142E        2   4 109</span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Eli Miller, Mike Stackhouse, Ashley Tarasiewicz, Nathan Kosiba.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer></div>

  


  

  </body></html>

